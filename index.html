<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanish Flashcard Game</title>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }
    
        body {
    background-color: #f5f5f5;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    gap: 20px;
    position: relative;
}
        .app-container {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
            padding: 20px;
        }
    
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
    
        .progress-container {
            flex-grow: 1;
            margin-right: 10px;
        }
    
        .progress-bar {
            background-color: #e0e0e0;
            border-radius: 10px;
            height: 10px;
            width: 100%;
        }
    
        .progress-fill {
            background-color: #4CAF50;
            height: 100%;
            border-radius: 10px;
            width: 0%;
            transition: width 0.3s ease;
        }
    
        .counter {
            font-size: 14px;
            color: #666;
        }
    
        .word-display {
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            margin: 30px 0;
            color: #333;
        }
    
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
    
        .option-button {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }
    
        .option-button:hover {
            background-color: #f9f9f9;
        }
    
        .option-button.correct {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
    
        .option-button.incorrect {
            background-color: #F44336;
            color: white;
            border-color: #F44336;
        }
    
        .next-button {
            width: 100%;
            padding: 12px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            display: none;
        }
    
        .next-button:hover {
            background-color: #0b7dda;
        }
    
        .feedback {
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            height: 20px;
        }
    
        .feedback.correct {
            color: #4CAF50;
        }
    
        .feedback.incorrect {
            color: #F44336;
        }
    
        .category-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap; 
        }
    
        .category-button {
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 20px;
            background-color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap; 
        }
    
        .category-button:hover {
            background-color: #f0f0f0;
        }
    
        .category-button.active {
            background-color: #2196F3;
            color: white;
            border-color: #2196F3;
        }
    
        
        @media (max-width: 400px) {
            .category-button {
                padding: 6px 12px; 
                font-size: 12px; 
            }
    
            .category-selector {
                gap: 8px; 
            }
        }
    
        .score-icons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
    
        .score-icon {
            cursor: pointer;
            font-size: 14px;
            padding: 5px;
            border-radius: 5px;
            transition: background-color 0.2s ease;
        }
    
        .score-icon.correct {
            color: #4CAF50;
        }
    
        .score-icon.incorrect {
            color: #F44336;
        }
    
        .score-icon:hover {
            background-color: #f0f0f0;
        }
    
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
    
        .modal-content {
            background-color: white;
            border-radius: 12px;
            padding: 20px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
    
        .modal-button {
            padding: 10px 20px;
            margin: 10px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
    
        .modal-button#retryButton {
            background-color: #2196F3;
            color: white;
        }
    
        .modal-button#retryButton:hover {
            background-color: #0b7dda;
        }
    
        .modal-button#reviewButton {
            background-color: #4CAF50;
            color: white;
        }
    
        .modal-button#reviewButton:hover {
            background-color: #388E3C;
        }
    
        .modal-button.close-button {
            background-color: #F44336;
            color: white;
        }
    
        .modal-button.close-button:hover {
            background-color: #D32F2F;
        }
    
        #wordList {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
            text-align: left;
        }
    
        .word-item {
            padding: 8px;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        }
    
        .word-item:last-child {
            border-bottom: none;
        }
    
        .sections-container {
            width: 100%;
            max-width: 500px;
            background-color: #f9f9f9; /* Distinct background for sections */
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Shadow to make it stand out */
            padding: 20px;
        }
    
        .section {
            margin-bottom: 15px;
        }
    
        .section-button {
            width: 100%;
            padding: 10px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
    
        .section-button:hover {
            background-color: #0b7dda;
        }
    
        .section-button.active {
            background-color: #4CAF50;
        }
    
        .lessons-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 8px;
        }
    
        .lesson-button {
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 20px;
            background-color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }
    
        .lesson-button:hover {
            background-color: #f0f0f0;
        }
    
        #lessonModalOptions .modal-button {
            background-color: #2196F3;
            color: white;
        }
    
        #lessonModalOptions .modal-button:hover {
            background-color: #0b7dda;
        }
    
        #grammarContent {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
            text-align: left;
            font-size: 14px;
            line-height: 1.5;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
    
        #grammarContent p, #grammarContent ul, #grammarContent h3 {
            margin: 10px 0;
        }
    
        #grammarContent ul {
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <!-- Quiz Box (Existing) -->
    <div class="app-container">
        <div class="category-selector" id="categorySelector">
            <button class="category-button active" data-category="nouns">Nouns</button>
            <button class="category-button" data-category="verbs">Verbs</button>
            <button class="category-button" data-category="expressions">Expressions</button>
            <button class="category-button" data-category="adjectives">Adjectives</button>
        </div>
        
        <div class="header">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            <div class="counter" id="counter">0/0</div>
           
            <div class="score-icons">
                <div class="score-icon correct" id="correctIcon" title="Correct Answers">
                    ✅ <span id="correctCount">0</span>
                </div>
                <div class="score-icon incorrect" id="incorrectIcon" title="Incorrect Answers">
                    ❌ <span id="incorrectCount">0</span>
                </div>
            </div>
        </div>
        
        <div class="word-display" id="wordDisplay">Select a category</div>
        
        <div class="options-container" id="optionsContainer"></div>
        
        <div class="feedback" id="feedback"></div>
        
        <button class="next-button" id="nextButton">Next</button>

        <div class="modal" id="reviewModal" style="display: none;">
            <div class="modal-content">
                <h2 id="modalTitle"></h2>
                <div id="modalOptions">
                    <button class="modal-button" id="retryButton">Try them again</button>
                    <button class="modal-button" id="reviewButton">Look at what you got</button>
                </div>
                <div id="wordList" style="display: none;"></div>
                <button class="modal-button close-button" id="closeModal">Close</button>
            </div>
        </div>
    </div>

    <!-- Grammar Sections (Separate) -->
    <div class="sections-container">
        <div class="section">
            <button class="section-button" data-section="b1">B1 Level</button>
            <div class="lessons-list" id="b1-lessons" style="display: none;">
                <button class="lesson-button" data-lesson="b1-lesson1">B1 Lesson 1: Present Tense Regular Verbs</button>
                <button class="lesson-button" data-lesson="b1-lesson2">B1 Lesson 2: Ser vs. Estar</button>
                <button class="lesson-button" data-lesson="b1-lesson3">B1 Lesson 3: Direct Object Pronouns</button>
                <button class="lesson-button" data-lesson="b1-lesson4">B1 Lesson 4: Present Tense Irregular Verbs</button>
                <button class="lesson-button" data-lesson="b1-lesson5">B1 Lesson 5: Reflexive Verbs</button>
                <button class="lesson-button" data-lesson="b1-lesson6">B1 Lesson 6: Preterite Tense Regular Verbs</button>
                <button class="lesson-button" data-lesson="b1-lesson7">B1 Lesson 7: Possessive Adjectives</button>
                <button class="lesson-button" data-lesson="b1-lesson8">B1 Lesson 8: Adverbs of Frequency</button>
                <button class="lesson-button" data-lesson="b1-lesson9">B1 Lesson 9: Demonstrative Adjectives</button>
                <button class="lesson-button" data-lesson="b1-lesson10">B1 Lesson 10: Basic Prepositions</button>
                <button class="lesson-button" data-lesson="b1-lesson11">B1 Lesson 11: Imperfect Tense Regular Verbs</button>
                <button class="lesson-button" data-lesson="b1-lesson12">B1 Lesson 12: Definite and Indefinite Articles</button>
                <button class="lesson-button" data-lesson="b1-lesson13">B1 Lesson 13: Adjectives of Quantity</button>
                <button class="lesson-button" data-lesson="b1-lesson14">B1 Lesson 14: Present Progressive</button>
                <button class="lesson-button" data-lesson="b1-lesson15">B1 Lesson 15: Basic Question Words</button>
                <button class="lesson-button" data-lesson="b1-lesson16">B1 Lesson 16: Comparatives and Superlatives</button>
                <button class="lesson-button" data-lesson="b1-lesson17">B1 Lesson 17: Negation</button>
                <button class="lesson-button" data-lesson="b1-lesson18">B1 Lesson 18: Stem-Changing Verbs (Present Tense)</button>
                <button class="lesson-button" data-lesson="b1-lesson19">B1 Lesson 19: Adverbs Ending in -mente</button>
                <button class="lesson-button" data-lesson="b1-lesson20">B1 Lesson 20: Time Expressions</button>
                <button class="lesson-button" data-lesson="b1-lesson21">B1 Lesson 21: Commands (Imperative Mood - Affirmative Tú)</button>
                <button class="lesson-button" data-lesson="b1-lesson22">B1 Lesson 22: Introduction to Present Subjunctive</button>
                <button class="lesson-button" data-lesson="b1-lesson23">B1 Lesson 23: Indirect Object Pronouns</button>
                <button class="lesson-button" data-lesson="b1-lesson24">B1 Lesson 24: Preterite Irregular Verbs</button>
                <button class="lesson-button" data-lesson="b1-lesson25">B1 Lesson 25: Gustar and Similar Verbs</button>
            </div>
        </div>
        <div class="section">
            <button class="section-button" data-section="b2">B2 Level</button>
            <div class="lessons-list" id="b2-lessons" style="display: none;">
                <button class="lesson-button" data-lesson="b2-lesson1">B2 Lesson 1: Present Subjunctive Regular Verbs</button>
                <button class="lesson-button" data-lesson="b2-lesson2">B2 Lesson 2: Past Perfect Tense</button>
                <button class="lesson-button" data-lesson="b2-lesson3">B2 Lesson 3: Indirect Object Pronouns</button>
                <button class="lesson-button" data-lesson="b2-lesson4">B2 Lesson 4: Imperfect Subjunctive</button>
                <button class="lesson-button" data-lesson="b2-lesson5">B2 Lesson 5: Future Tense</button>
                <button class="lesson-button" data-lesson="b2-lesson6">B2 Lesson 6: Conditional Tense</button>
                <button class="lesson-button" data-lesson="b2-lesson7">B2 Lesson 7: Por vs. Para</button>
                <button class="lesson-button" data-lesson="b2-lesson8">B2 Lesson 8: Relative Pronouns</button>
                <button class="lesson-button" data-lesson="b2-lesson9">B2 Lesson 9: Preterite vs. Imperfect</button>
                <button class="lesson-button" data-lesson="b2-lesson10">B2 Lesson 10: Commands (Imperative Mood)</button>
                <button class="lesson-button" data-lesson="b2-lesson11">B2 Lesson 11: Present Subjunctive Irregular Verbs</button>
                <button class="lesson-button" data-lesson="b2-lesson12">B2 Lesson 12: Reflexive Verbs in Subjunctive</button>
                <button class="lesson-button" data-lesson="b2-lesson13">B2 Lesson 13: Se for Impersonal and Passive</button>
                <button class="lesson-button" data-lesson="b2-lesson14">B2 Lesson 14: Past Subjunctive Triggers</button>
                <button class="lesson-button" data-lesson="b2-lesson15">B2 Lesson 15: Conditional Sentences with Si</button>
                <button class="lesson-button" data-lesson="b2-lesson16">B2 Lesson 16: Gerunds and Infinitives</button>
                <button class="lesson-button" data-lesson="b2-lesson17">B2 Lesson 17: Double Object Pronouns</button>
                <button class="lesson-button" data-lesson="b2-lesson18">B2 Lesson 18: Preterite Irregular Verbs</button>
                <button class="lesson-button" data-lesson="b2-lesson19">B2 Lesson 19: Subjunctive with Conjunctions</button>
                <button class="lesson-button" data-lesson="b2-lesson20">B2 Lesson 20: Adverbial Clauses</button>
                <button class="lesson-button" data-lesson="b2-lesson21">B2 Lesson 21: Past Perfect Subjunctive</button>
                <button class="lesson-button" data-lesson="b2-lesson22">B2 Lesson 22: Double Object Pronouns with Commands</button>
                <button class="lesson-button" data-lesson="b2-lesson23">B2 Lesson 23: Subjunctive with Adverbial Clauses (Advanced)</button>
                <button class="lesson-button" data-lesson="b2-lesson24">B2 Lesson 24: Future Perfect</button>
                <button class="lesson-button" data-lesson="b2-lesson25">B2 Lesson 25: Conditional Perfect</button>
            </div>
        </div>
    </div>
    <!-- Modal for Lesson Options -->
    <div class="modal" id="lessonModal" style="display: none;">
        <div class="modal-content">
            <h2 id="lessonModalTitle"></h2>
            <div id="lessonModalOptions">
                <button class="modal-button" id="exerciseButton">Exercise</button>
                <button class="modal-button" id="lessonViewButton">Lesson</button>
            </div>
            <div id="grammarContent" style="display: none;"></div>
            <button class="modal-button close-button" id="closeLessonModal">Close</button>
        </div>
    </div>
</body>

    <script>
        // Vocabulary categorized by type
        const vocabularyByCategory = {
            nouns: [
    // Basic B1 nouns
    {spanish: "el hombre", english: "man"},
    {spanish: "la mujer", english: "woman"},
    {spanish: "el niño", english: "boy"},
    {spanish: "la niña", english: "girl"},
    {spanish: "el perro", english: "dog"},
    {spanish: "el gato", english: "cat"},
    
    // Common B1 nouns
    {spanish: "la casa", english: "house"},
    {spanish: "el trabajo", english: "work/job"},
    {spanish: "la escuela", english: "school"},
    {spanish: "el libro", english: "book"},
    {spanish: "la comida", english: "food"},
    {spanish: "el tiempo", english: "time/weather"},
    {spanish: "la ciudad", english: "city"},
    {spanish: "el país", english: "country"},
    {spanish: "la familia", english: "family"},
    {spanish: "el amigo", english: "friend"},
    {spanish: "la vida", english: "life"},
    {spanish: "el dinero", english: "money"},
    {spanish: "el coche", english: "car"},
    {spanish: "la mesa", english: "table"},
    {spanish: "la silla", english: "chair"},
    
    // Natural environment B1-B2
    {spanish: "el bosque", english: "forest"},
    {spanish: "la montaña", english: "mountain"},
    {spanish: "el río", english: "river"},
    {spanish: "el mar", english: "sea"},
    {spanish: "el lago", english: "lake"},
    {spanish: "la playa", english: "beach"},
    {spanish: "el desierto", english: "desert"},
    {spanish: "la isla", english: "island"},
    {spanish: "la costa", english: "coast"},
    {spanish: "el cielo", english: "sky"},
    {spanish: "las nubes", english: "clouds"},
    {spanish: "la lluvia", english: "rain"},
    {spanish: "la nieve", english: "snow"},
    {spanish: "el clima", english: "climate"},
    
    // B2 level nouns
    {spanish: "el asunto", english: "matter/issue"},
    {spanish: "la decisión", english: "decision"},
    {spanish: "el gobierno", english: "government"},
    {spanish: "la empresa", english: "company/business"},
    {spanish: "el sistema", english: "system"},
    {spanish: "la sociedad", english: "society"},
    {spanish: "el desarrollo", english: "development"},
    {spanish: "la necesidad", english: "necessity/need"},
    {spanish: "el cambio", english: "change"},
    {spanish: "la situación", english: "situation"},
    {spanish: "el momento", english: "moment"},
    {spanish: "la forma", english: "form/shape"},
    {spanish: "el punto", english: "point"},
    {spanish: "la posibilidad", english: "possibility"},
    {spanish: "el caso", english: "case"},
    {spanish: "la información", english: "information"},
    {spanish: "el grupo", english: "group"},
    {spanish: "la experiencia", english: "experience"},
    {spanish: "el resultado", english: "result"},
    {spanish: "la actividad", english: "activity"},
    
    // Technology B2
    {spanish: "el ordenador", english: "computer"},
    {spanish: "la computadora", english: "computer (Latin America)"},
    {spanish: "el teléfono", english: "telephone"},
    {spanish: "el móvil", english: "mobile phone"},
    {spanish: "la red", english: "network"},
    {spanish: "el internet", english: "internet"},
    {spanish: "la aplicación", english: "application/app"},
    {spanish: "el dispositivo", english: "device"},
    {spanish: "la pantalla", english: "screen"},
    {spanish: "el teclado", english: "keyboard"},
    {spanish: "el ratón", english: "mouse (computer)"},
    {spanish: "la impresora", english: "printer"},
    {spanish: "la tecnología", english: "technology"},
    {spanish: "el programa", english: "program/software"},
    {spanish: "el archivo", english: "file"},
    {spanish: "la contraseña", english: "password"},
    
    // Academic B2-C1
    {spanish: "el conocimiento", english: "knowledge"},
    {spanish: "la investigación", english: "research/investigation"},
    {spanish: "el estudio", english: "study"},
    {spanish: "la universidad", english: "university"},
    {spanish: "la carrera", english: "career/degree"},
    {spanish: "el título", english: "degree/title"},
    {spanish: "la asignatura", english: "subject (academic)"},
    {spanish: "el examen", english: "exam"},
    {spanish: "el ensayo", english: "essay"},
    {spanish: "la tesis", english: "thesis"},
    {spanish: "el doctorado", english: "doctorate"},
    {spanish: "la ciencia", english: "science"},
    {spanish: "la teoría", english: "theory"},
    {spanish: "el análisis", english: "analysis"},
    {spanish: "la hipótesis", english: "hypothesis"},
    {spanish: "el argumento", english: "argument"},
    {spanish: "la conclusión", english: "conclusion"},
    {spanish: "el debate", english: "debate"},
    
    // Professional C1
    {spanish: "el emprendedor", english: "entrepreneur"},
    {spanish: "el ejecutivo", english: "executive"},
    {spanish: "la ejecutiva", english: "executive (female)"},
    {spanish: "el directivo", english: "manager/director"},
    {spanish: "la directiva", english: "manager/director (female)"},
    {spanish: "el empleado", english: "employee"},
    {spanish: "la empleada", english: "employee (female)"},
    {spanish: "el colega", english: "colleague"},
    {spanish: "el jefe", english: "boss"},
    {spanish: "la jefa", english: "boss (female)"},
    {spanish: "el cliente", english: "client"},
    {spanish: "la clienta", english: "client (female)"},
    {spanish: "el proveedor", english: "supplier/provider"},
    {spanish: "la proveedora", english: "supplier/provider (female)"},
    {spanish: "el contrato", english: "contract"},
    {spanish: "la negociación", english: "negotiation"},
    {spanish: "el acuerdo", english: "agreement"},
    {spanish: "la reunión", english: "meeting"},
    {spanish: "el presupuesto", english: "budget"},
    {spanish: "la inversión", english: "investment"},
    
    // Abstract nouns C1
    {spanish: "la identidad", english: "identity"},
    {spanish: "la responsabilidad", english: "responsibility"},
    {spanish: "la libertad", english: "freedom"},
    {spanish: "la justicia", english: "justice"},
    {spanish: "el bienestar", english: "well-being"},
    {spanish: "la igualdad", english: "equality"},
    {spanish: "la diversidad", english: "diversity"},
    {spanish: "la sostenibilidad", english: "sustainability"},
    {spanish: "la innovación", english: "innovation"},
    {spanish: "la perspectiva", english: "perspective"},
    {spanish: "el concepto", english: "concept"},
    {spanish: "la estrategia", english: "strategy"},
    {spanish: "la influencia", english: "influence"},
    {spanish: "el impacto", english: "impact"},
    {spanish: "la consecuencia", english: "consequence"},
    {spanish: "el equilibrio", english: "balance/equilibrium"},
    {spanish: "la conciencia", english: "consciousness/awareness"},
    {spanish: "la mentalidad", english: "mentality/mindset"},
    {spanish: "el paradigma", english: "paradigm"},
    {spanish: "la ambigüedad", english: "ambiguity"},
    
    // Advanced C1
    {spanish: "el ámbito", english: "scope/field/area"},
    {spanish: "el rasgo", english: "trait/feature"},
    {spanish: "la incertidumbre", english: "uncertainty"},
    {spanish: "el matiz", english: "nuance/shade"},
    {spanish: "la coyuntura", english: "situation/conjuncture"},
    {spanish: "el criterio", english: "criterion/judgment"},
    {spanish: "la índole", english: "nature/type"},
    {spanish: "el planteamiento", english: "approach/proposal"},
    {spanish: "la tesitura", english: "situation/position"},
    {spanish: "el patrimonio", english: "heritage/patrimony"},
    {spanish: "la trayectoria", english: "trajectory/career path"},
    {spanish: "el entorno", english: "environment/surroundings"},
    {spanish: "el auge", english: "peak/height/rise"},
    {spanish: "la repercusión", english: "repercussion/impact"},
    {spanish: "el desempeño", english: "performance/execution"},
    {spanish: "la envergadura", english: "magnitude/scope"},
    {spanish: "el eje", english: "axis/central element"},
    {spanish: "el sello", english: "stamp/seal/hallmark"},
    {spanish: "la divergencia", english: "divergence/difference"},
    {spanish: "la controversia", english: "controversy"},
    {spanish: "el hito", english: "milestone/landmark"},
    {spanish: "el estigma", english: "stigma"},
    {spanish: "la cúspide", english: "peak/summit/zenith"},
    {spanish: "el contraste", english: "contrast"},
    {spanish: "la premisa", english: "premise"},
    {spanish: "el escrutinio", english: "scrutiny"},
    {spanish: "la disyuntiva", english: "dilemma/choice"},
    {spanish: "el desafío", english: "challenge"},
    {spanish: "la vertiente", english: "aspect/side/slope"},
    {spanish: "el respaldo", english: "support/backing"}
],
            
verbs: [
    // Common B1 verbs
    {spanish: "hablar", english: "to speak"},
    {spanish: "comer", english: "to eat"},
    {spanish: "beber", english: "to drink"},
    {spanish: "vivir", english: "to live"},
    {spanish: "trabajar", english: "to work"},
    {spanish: "estudiar", english: "to study"},
    {spanish: "aprender", english: "to learn"},
    {spanish: "enseñar", english: "to teach"},
    {spanish: "comprar", english: "to buy"},
    {spanish: "vender", english: "to sell"},
    {spanish: "pagar", english: "to pay"},
    {spanish: "gastar", english: "to spend"},
    {spanish: "ahorrar", english: "to save (money)"},
    {spanish: "ganar", english: "to win/earn"},
    {spanish: "perder", english: "to lose"},
    
    // Irregular but common B1 verbs
    {spanish: "ir", english: "to go"},
    {spanish: "ser", english: "to be (permanent)"},
    {spanish: "estar", english: "to be (temporary)"},
    {spanish: "tener", english: "to have"},
    {spanish: "hacer", english: "to do/make"},
    {spanish: "decir", english: "to say/tell"},
    {spanish: "venir", english: "to come"},
    {spanish: "poner", english: "to put/place"},
    {spanish: "salir", english: "to leave/go out"},
    {spanish: "ver", english: "to see"},
    {spanish: "dar", english: "to give"},
    {spanish: "saber", english: "to know (facts)"},
    {spanish: "conocer", english: "to know (people/places)"},
    {spanish: "poder", english: "to be able to/can"},
    {spanish: "querer", english: "to want"},
    
    // Daily activities B1-B2
    {spanish: "despertarse", english: "to wake up"},
    {spanish: "levantarse", english: "to get up"},
    {spanish: "ducharse", english: "to shower"},
    {spanish: "vestirse", english: "to get dressed"},
    {spanish: "desayunar", english: "to have breakfast"},
    {spanish: "almorzar", english: "to have lunch"},
    {spanish: "cenar", english: "to have dinner"},
    {spanish: "dormirse", english: "to fall asleep"},
    {spanish: "acostarse", english: "to go to bed"},
    {spanish: "preparar", english: "to prepare"},
    {spanish: "cocinar", english: "to cook"},
    {spanish: "limpiar", english: "to clean"},
    {spanish: "lavar", english: "to wash"},
    {spanish: "planchar", english: "to iron"},
    
    // Communications B1-B2
    {spanish: "llamar", english: "to call"},
    {spanish: "contestar", english: "to answer"},
    {spanish: "preguntar", english: "to ask"},
    {spanish: "responder", english: "to respond"},
    {spanish: "explicar", english: "to explain"},
    {spanish: "describir", english: "to describe"},
    {spanish: "charlar", english: "to chat"},
    {spanish: "discutir", english: "to discuss/argue"},
    {spanish: "negociar", english: "to negotiate"},
    {spanish: "enviar", english: "to send"},
    {spanish: "recibir", english: "to receive"},
    {spanish: "entender", english: "to understand"},
    {spanish: "malinterpretar", english: "to misunderstand"},
    {spanish: "confundir", english: "to confuse"},
    
    // Action verbs B1-B2
    {spanish: "correr", english: "to run"},
    {spanish: "caminar", english: "to walk"},
    {spanish: "nadar", english: "to swim"},
    {spanish: "saltar", english: "to jump"},
    {spanish: "caer", english: "to fall"},
    {spanish: "subir", english: "to go up/climb"},
    {spanish: "bajar", english: "to go down/descend"},
    {spanish: "empujar", english: "to push"},
    {spanish: "tirar", english: "to pull/throw"},
    {spanish: "abrir", english: "to open"},
    {spanish: "cerrar", english: "to close"},
    {spanish: "entrar", english: "to enter"},
    {spanish: "salir", english: "to exit/leave"},
    {spanish: "llegar", english: "to arrive"},
    {spanish: "partir", english: "to depart"},
    
    // B2 level verbs
    {spanish: "considerar", english: "to consider"},
    {spanish: "suponer", english: "to suppose/assume"},
    {spanish: "recordar", english: "to remember"},
    {spanish: "olvidar", english: "to forget"},
    {spanish: "convertir", english: "to convert/transform"},
    {spanish: "desarrollar", english: "to develop"},
    {spanish: "mejorar", english: "to improve"},
    {spanish: "empeorar", english: "to worsen"},
    {spanish: "mantener", english: "to maintain/keep"},
    {spanish: "cambiar", english: "to change"},
    {spanish: "crear", english: "to create"},
    {spanish: "destruir", english: "to destroy"},
    {spanish: "construir", english: "to build/construct"},
    {spanish: "establecer", english: "to establish"},
    {spanish: "permitir", english: "to permit/allow"},
    {spanish: "prohibir", english: "to prohibit/forbid"},
    {spanish: "intentar", english: "to try/attempt"},
    {spanish: "lograr", english: "to achieve"},
    {spanish: "fallar", english: "to fail"},
    
    // Cognitive B2-C1
    {spanish: "pensar", english: "to think"},
    {spanish: "creer", english: "to believe"},
    {spanish: "dudar", english: "to doubt"},
    {spanish: "reflexionar", english: "to reflect/ponder"},
    {spanish: "analizar", english: "to analyze"},
    {spanish: "evaluar", english: "to evaluate"},
    {spanish: "comparar", english: "to compare"},
    {spanish: "contrastar", english: "to contrast"},
    {spanish: "deducir", english: "to deduce"},
    {spanish: "inferir", english: "to infer"},
    {spanish: "concluir", english: "to conclude"},
    {spanish: "percibir", english: "to perceive"},
    {spanish: "intuir", english: "to intuit"},
    {spanish: "imaginar", english: "to imagine"},
    {spanish: "soñar", english: "to dream"},
    {spanish: "interpretar", english: "to interpret"},
    
    // Professional/Business C1
    {spanish: "gestionar", english: "to manage"},
    {spanish: "coordinar", english: "to coordinate"},
    {spanish: "delegar", english: "to delegate"},
    {spanish: "supervisar", english: "to supervise"},
    {spanish: "implementar", english: "to implement"},
    {spanish: "administrar", english: "to administer"},
    {spanish: "dirigir", english: "to direct/lead"},
    {spanish: "presidir", english: "to preside over"},
    {spanish: "representar", english: "to represent"},
    {spanish: "invertir", english: "to invest"},
    {spanish: "financiar", english: "to finance"},
    {spanish: "rentabilizar", english: "to make profitable"},
    {spanish: "facturar", english: "to bill/invoice"},
    {spanish: "comercializar", english: "to market"},
    {spanish: "promocionar", english: "to promote"},
    
    // Advanced C1 verbs
    {spanish: "abarcar", english: "to encompass/cover"},
    {spanish: "abordar", english: "to address/tackle"},
    {spanish: "acatar", english: "to comply with/obey"},
    {spanish: "acentuar", english: "to emphasize/accentuate"},
    {spanish: "acotar", english: "to limit/define boundaries"},
    {spanish: "aludir", english: "to allude to/refer to"},
    {spanish: "atenuar", english: "to mitigate/attenuate"},
    {spanish: "atribuir", english: "to attribute"},
    {spanish: "cuestionar", english: "to question"},
    {spanish: "decrecer", english: "to decrease"},
    {spanish: "denotar", english: "to denote/indicate"},
    {spanish: "desempeñar", english: "to perform/carry out"},
    {spanish: "destacar", english: "to highlight/stand out"},
    {spanish: "discernir", english: "to discern/distinguish"},
    {spanish: "discrepar", english: "to disagree"},
    {spanish: "disuadir", english: "to dissuade"},
    {spanish: "divulgar", english: "to disseminate/publish"},
    {spanish: "ejercer", english: "to exercise/practice (profession)"},
    {spanish: "enfatizar", english: "to emphasize"},
    {spanish: "enmarcar", english: "to frame/contextualize"},
    {spanish: "esbozar", english: "to sketch/outline"},
    {spanish: "estimar", english: "to estimate/consider"},
    {spanish: "evocar", english: "to evoke"},
    {spanish: "fomentar", english: "to promote/encourage"},
    {spanish: "indagar", english: "to investigate/inquire"},
    {spanish: "incidir", english: "to affect/influence"},
    {spanish: "inferir", english: "to infer"},
    {spanish: "matizar", english: "to qualify/nuance"},
    {spanish: "plasmar", english: "to capture/express"},
    {spanish: "plantear", english: "to pose/raise (question)"},
    {spanish: "ponderar", english: "to weigh/consider carefully"},
    {spanish: "postergar", english: "to postpone/delay"},
    {spanish: "prescindir", english: "to do without/dispense with"},
    {spanish: "propugnar", english: "to advocate/defend"},
    {spanish: "redundar", english: "to result in/redound"},
    {spanish: "relegar", english: "to relegate/sideline"},
    {spanish: "soslayar", english: "to avoid/evade"},
    {spanish: "suscitar", english: "to provoke/raise"},
    {spanish: "trascender", english: "to transcend"},
    {spanish: "vislumbrar", english: "to glimpse/envision"}
],
            
            expressions: [
  { spanish: "buenos días", english: "good morning" },
  { spanish: "buenas tardes", english: "good afternoon" },
  { spanish: "buenas noches", english: "good evening/night" },
  { spanish: "hola", english: "hello" },
  { spanish: "adiós", english: "goodbye" },
  { spanish: "por favor", english: "please" },
  { spanish: "gracias", english: "thank you" },
  { spanish: "de nada", english: "you're welcome" },
  { spanish: "¿cómo estás?", english: "how are you?" },
  { spanish: "estoy bien", english: "I'm fine" },
  { spanish: "mucho gusto", english: "nice to meet you" },
  { spanish: "disculpe", english: "excuse me" },
  { spanish: "lo siento", english: "I'm sorry" },
  { spanish: "¿qué hora es?", english: "what time is it?" },
  { spanish: "¿dónde está...?", english: "where is...?" },
  { spanish: "hasta luego", english: "see you later" },
  { spanish: "¿cómo te llamas?", english: "what's your name?" },
  { spanish: "me llamo...", english: "my name is..." },
  { spanish: "no entiendo", english: "I don't understand" },
  { spanish: "¿puedes repetir, por favor?", english: "can you repeat, please?" },
  { spanish: "hablo un poco de español", english: "I speak a little Spanish" },
  { spanish: "¿cuánto cuesta?", english: "how much does it cost?" },
  { spanish: "quiero...", english: "I want..." },
  { spanish: "necesito ayuda", english: "I need help" },
  { spanish: "¿dónde está el baño?", english: "where is the bathroom?" },
  { spanish: "estoy perdido/a", english: "I'm lost" },
  { spanish: "puedes ayudarme", english: "can you help me?" },
  { spanish: "tengo una pregunta", english: "I have a question" },
  { spanish: "¿a qué hora abre/cierra?", english: "what time does it open/close?" },
  { spanish: "está cerca de aquí", english: "is it near here?" },
  { spanish: "me gustaría...", english: "I would like..." },
  { spanish: "no hay problema", english: "no problem" },
  { spanish: "¿qué significa...?", english: "what does... mean?" },
  { spanish: "un momento, por favor", english: "one moment, please" },
  { spanish: "feliz cumpleaños", english: "happy birthday" },
  { spanish: "¡salud!", english: "cheers! / bless you!" },
  { spanish: "¿cómo se dice... en español?", english: "how do you say... in Spanish?" },
  { spanish: "tengo hambre", english: "I'm hungry" },
  { spanish: "tengo sed", english: "I'm thirsty" },
  { spanish: "¿puedo pagar con tarjeta?", english: "can I pay with a card?" },
  { spanish: "la cuenta, por favor", english: "the bill, please" },
  { spanish: "estoy cansado/a", english: "I'm tired" },
  { spanish: "vivo en...", english: "I live in..." },
  { spanish: "¿de dónde eres?", english: "where are you from?" },
  { spanish: "soy de...", english: "I'm from..." },
  { spanish: "hace buen/mal tiempo", english: "the weather is good/bad" },
  { spanish: "¿qué recomiendas?", english: "what do you recommend?" },
  { spanish: "espero que sí", english: "I hope so" },
  { spanish: "quizás mañana", english: "maybe tomorrow" },
  { spanish: "no estoy seguro/a", english: "I'm not sure" },
  // Socializing and Conversations
  { spanish: "¡qué buena onda!", english: "how cool!" },
  { spanish: "cuéntame más", english: "tell me more" },
  { spanish: "¿qué tal tu día?", english: "how’s your day going?" },
  { spanish: "estoy de acuerdo", english: "I agree" },
  { spanish: "no estoy de acuerdo", english: "I don’t agree" },
  { spanish: "¿qué opinas?", english: "what do you think?" },
  { spanish: "me parece genial", english: "I think that’s great" },
  { spanish: "¡qué interesante!", english: "how interesting!" },
  { spanish: "bromeas, ¿verdad?", english: "you’re kidding, right?" },
  { spanish: "me da igual", english: "I don’t care" },
  { spanish: "¡qué casualidad!", english: "what a coincidence!" },
  { spanish: "¿te cae bien?", english: "do you like him/her?" },
  { spanish: "es un placer charlar contigo", english: "it’s a pleasure talking to you" },
  { spanish: "mantengamos el contacto", english: "let’s keep in touch" },
  { spanish: "¡qué divertido!", english: "how fun!" },
  { spanish: "¿cuándo nos vemos?", english: "when do we meet up?" },
  { spanish: "estoy emocionado/a", english: "I’m excited" },
  { spanish: "me haces reír", english: "you make me laugh" },
  { spanish: "¿qué planes tienes?", english: "what are your plans?" },
  { spanish: "vamos a salir", english: "let’s go out" },
  { spanish: "¡qué sorpresa!", english: "what a surprise!" },
  { spanish: "te entiendo perfectamente", english: "I totally get you" },
  { spanish: "eso suena increíble", english: "that sounds amazing" },
  { spanish: "me siento un poco nervioso/a", english: "I feel a bit nervous" },
  { spanish: "¡qué lindo gesto!", english: "what a nice gesture!" },
  { spanish: "¿cómo lo llevas?", english: "how are you holding up?" },
  { spanish: "es una larga historia", english: "it’s a long story" },
  { spanish: "no me lo esperaba", english: "I didn’t expect that" },
  { spanish: "¡qué alivio!", english: "what a relief!" },
  { spanish: "te apoyo totalmente", english: "I totally support you" },
  { spanish: "¿cómo te sientes?", english: "how are you feeling?" },
  { spanish: "me dio mucha pena", english: "I felt really bad" },
  { spanish: "¡qué envidia!", english: "I’m so jealous!" },
  { spanish: "estoy de buen humor", english: "I’m in a good mood" },
  { spanish: "no te preocupes", english: "don’t worry" },
  { spanish: "¡venga, anímate!", english: "come on, cheer up!" },
  { spanish: "me encantó conocerte", english: "I loved meeting you" },
  { spanish: "espero verte pronto", english: "I hope to see you soon" },
  { spanish: "¿qué tal si...?", english: "how about...?" },
  { spanish: "tienes toda la razón", english: "you’re absolutely right" },
  { spanish: "me parece justo", english: "that seems fair" },
  { spanish: "¡qué exagerado/a!", english: "how exaggerated!" },
  { spanish: "me estás tomando el pelo", english: "you’re pulling my leg" },
  { spanish: "no me convence", english: "I’m not convinced" },
  { spanish: "es una pasada", english: "it’s awesome" },
  { spanish: "¿y tú qué dices?", english: "and what do you say?" },
  { spanish: "me da curiosidad", english: "I’m curious" },
  { spanish: "¡qué emoción!", english: "how exciting!" },
  { spanish: "estoy flipando", english: "I’m freaking out" },
  // Dining and Restaurants
  { spanish: "¿tienen menú del día?", english: "do you have a daily menu?" },
  { spanish: "¿qué lleva este plato?", english: "what’s in this dish?" },
  { spanish: "soy alérgico/a a...", english: "I’m allergic to..." },
  { spanish: "¿pueden hacerlo rápido?", english: "can you make it quick?" },
  { spanish: "está delicioso", english: "it’s delicious" },
  { spanish: "¿tienen opciones vegetarianas?", english: "do you have vegetarian options?" },
  { spanish: "sin gluten, por favor", english: "gluten-free, please" },
  { spanish: "¿pueden separar la cuenta?", english: "can you split the bill?" },
  { spanish: "está un poco frío", english: "it’s a bit cold" },
  { spanish: "¿me traes más agua?", english: "can you bring more water?" },
  { spanish: "no quiero cebolla", english: "I don’t want onion" },
  { spanish: "¿tienen postres caseros?", english: "do you have homemade desserts?" },
  { spanish: "está muy salado", english: "it’s too salty" },
  { spanish: "¿me das un tenedor, por favor?", english: "can I have a fork, please?" },
  { spanish: "quiero hacer una reserva", english: "I want to make a reservation" },
  { spanish: "¿tienen terraza?", english: "do you have an outdoor area?" },
  { spanish: "para dos personas", english: "for two people" },
  { spanish: "¿cuál es el plato estrella?", english: "what’s the signature dish?" },
  { spanish: "está todo perfecto", english: "everything’s perfect" },
  { spanish: "¿me lo envuelves para llevar?", english: "can you wrap it to go?" },
  { spanish: "no me gustó mucho", english: "I didn’t like it much" },
  { spanish: "¿tienen vino de la casa?", english: "do you have house wine?" },
  { spanish: "una mesa cerca de la ventana", english: "a table by the window" },
  { spanish: "¿cuánto tiempo de espera?", english: "how long is the wait?" },
  { spanish: "esto no es lo que pedí", english: "this isn’t what I ordered" },
  // Shopping
  { spanish: "¿dónde están los probadores?", english: "where are the fitting rooms?" },
  { spanish: "¿tienen esta talla?", english: "do you have this size?" },
  { spanish: "¿puedo devolverlo?", english: "can I return it?" },
  { spanish: "¿hay descuento?", english: "is there a discount?" },
  { spanish: "me lo llevo", english: "I’ll take it" },
  { spanish: "¿en qué pasillo está...?", english: "in which aisle is...?" },
  { spanish: "¿tienen algo más barato?", english: "do you have something cheaper?" },
  { spanish: "está en oferta", english: "it’s on sale" },
  { spanish: "¿me das una bolsa?", english: "can you give me a bag?" },
  { spanish: "¿aceptan efectivo?", english: "do you accept cash?" },
  { spanish: "no me queda bien", english: "it doesn’t fit me" },
  { spanish: "¿tienen garantía?", english: "does it come with a warranty?" },
  { spanish: "quiero cambiarlo", english: "I want to exchange it" },
  { spanish: "¿cuál es el precio final?", english: "what’s the final price?" },
  { spanish: "está un poco caro", english: "it’s a bit expensive" },
  { spanish: "¿pueden envolverlo para regalo?", english: "can you gift-wrap it?" },
  { spanish: "¿tienen stock?", english: "do you have it in stock?" },
  { spanish: "lo vi más barato en otro lado", english: "I saw it cheaper elsewhere" },
  { spanish: "¿cuándo llega?", english: "when will it arrive?" },
  { spanish: "quiero hacer un reclamo", english: "I want to make a complaint" },
  // Travel and Directions
  { spanish: "¿cómo llego a...?", english: "how do I get to...?" },
  { spanish: "¿es lejos de aquí?", english: "is it far from here?" },
  { spanish: "gira a la derecha", english: "turn right" },
  { spanish: "gira a la izquierda", english: "turn left" },
  { spanish: "sigue recto", english: "go straight" },
  { spanish: "¿dónde está la estación?", english: "where’s the station?" },
  { spanish: "un billete de ida", english: "a one-way ticket" },
  { spanish: "un billete de ida y vuelta", english: "a round-trip ticket" },
  { spanish: "¿a qué hora sale el tren?", english: "what time does the train leave?" },
  { spanish: "¿cuál es el próximo autobús?", english: "when’s the next bus?" },
  { spanish: "me bajé en la parada equivocada", english: "I got off at the wrong stop" },
  { spanish: "¿dónde está la salida?", english: "where’s the exit?" },
  { spanish: "necesito un taxi", english: "I need a taxi" },
  { spanish: "¿cuánto es hasta el aeropuerto?", english: "how much to the airport?" },
  { spanish: "¿pueden llevar mi equipaje?", english: "can you take my luggage?" },
  { spanish: "perdí mi maleta", english: "I lost my suitcase" },
  { spanish: "¿dónde está la oficina de turismo?", english: "where’s the tourist office?" },
  { spanish: "¿tienen un mapa?", english: "do you have a map?" },
  { spanish: "quiero alquilar un coche", english: "I want to rent a car" },
  { spanish: "¿cuál es el límite de velocidad?", english: "what’s the speed limit?" },
  { spanish: "¿es seguro caminar por aquí?", english: "is it safe to walk here?" },
  { spanish: "¿dónde puedo cambiar dinero?", english: "where can I exchange money?" },
  { spanish: "¿cuál es la mejor ruta?", english: "what’s the best route?" },
  { spanish: "estoy buscando un hotel", english: "I’m looking for a hotel" },
  { spanish: "¿tienen habitaciones disponibles?", english: "do you have any rooms available?" },
  { spanish: "quiero una habitación individual", english: "I want a single room" },
  { spanish: "¿incluye desayuno?", english: "does it include breakfast?" },
  { spanish: "la llave de mi habitación", english: "the key to my room" },
  { spanish: "¿dónde está el ascensor?", english: "where’s the elevator?" },
  { spanish: "no funciona el aire acondicionado", english: "the air conditioning isn’t working" },
  { spanish: "¿pueden limpiar mi habitación?", english: "can you clean my room?" },
  { spanish: "¿a qué hora es el check-out?", english: "what time is check-out?" },
  { spanish: "quiero extender mi estancia", english: "I want to extend my stay" },
  { spanish: "¿dónde está el parking?", english: "where’s the parking?" },
  { spanish: "¿es una zona turística?", english: "is it a tourist area?" },
  { spanish: "¿qué lugares recomiendas visitar?", english: "what places do you recommend visiting?" },
  { spanish: "necesito un guía", english: "I need a guide" },
  { spanish: "¿hay wifi gratis?", english: "is there free wifi?" },
  { spanish: "¿cuál es la contraseña del wifi?", english: "what’s the wifi password?" },
  { spanish: "perdí mi pasaporte", english: "I lost my passport" },
  { spanish: "¿dónde está la embajada?", english: "where’s the embassy?" },
  { spanish: "necesito un adaptador de enchufe", english: "I need a plug adapter" },
  // Work and Professional Settings
  { spanish: "¿cuándo es la reunión?", english: "when’s the meeting?" },
  { spanish: "necesito enviar un correo", english: "I need to send an email" },
  { spanish: "¿puedes revisarlo?", english: "can you review it?" },
  { spanish: "estoy trabajando en ello", english: "I’m working on it" },
  { spanish: "¿cuál es el plazo?", english: "what’s the deadline?" },
  { spanish: "necesito más tiempo", english: "I need more time" },
  { spanish: "¿puedes confirmar la cita?", english: "can you confirm the appointment?" },
  { spanish: "quiero programar una reunión", english: "I want to schedule a meeting" },
  { spanish: "¿dónde está la sala de conferencias?", english: "where’s the conference room?" },
  { spanish: "necesito hacer una presentación", english: "I need to give a presentation" },
  { spanish: "esto es urgente", english: "this is urgent" },
  { spanish: "¿puedes ayudarme con el informe?", english: "can you help me with the report?" },
  { spanish: "estoy sobrecargado/a de trabajo", english: "I’m overwhelmed with work" },
  { spanish: "¿cuál es la política de la empresa?", english: "what’s the company policy?" },
  { spanish: "necesito hablar con el jefe", english: "I need to talk to the boss" },
  { spanish: "¿puedo trabajar desde casa?", english: "can I work from home?" },
  { spanish: "quiero solicitar un día libre", english: "I want to request a day off" },
  { spanish: "¿cuándo pagan el salario?", english: "when do they pay the salary?" },
  { spanish: "tengo una entrevista de trabajo", english: "I have a job interview" },
  { spanish: "¿cuáles son los requisitos?", english: "what are the requirements?" },
  { spanish: "envíame los detalles, por favor", english: "send me the details, please" },
  { spanish: "necesito una factura", english: "I need an invoice" },
  { spanish: "¿puedes firmar aquí?", english: "can you sign here?" },
  { spanish: "esto no estaba en el contrato", english: "this wasn’t in the contract" },
  { spanish: "¿cómo funciona el sistema?", english: "how does the system work?" },
  { spanish: "necesito acceso al servidor", english: "I need access to the server" },
  { spanish: "hay un error en el documento", english: "there’s an error in the document" },
  { spanish: "quiero proponer una idea", english: "I want to propose an idea" },
  { spanish: "¿quién está a cargo?", english: "who’s in charge?" },
  { spanish: "necesito un intérprete", english: "I need an interpreter" },
  // Emergencies and Health
  { spanish: "¡llama a una ambulancia!", english: "call an ambulance!" },
  { spanish: "necesito un médico", english: "I need a doctor" },
  { spanish: "me siento mal", english: "I feel sick" },
  { spanish: "¿dónde está el hospital?", english: "where’s the hospital?" },
  { spanish: "tengo dolor aquí", english: "I have pain here" },
  { spanish: "¿tienen una farmacia cerca?", english: "is there a pharmacy nearby?" },
  { spanish: "necesito una receta", english: "I need a prescription" },
  { spanish: "me mareé", english: "I feel dizzy" },
  { spanish: "tengo fiebre", english: "I have a fever" },
  { spanish: "¿pueden darme algo para el dolor?", english: "can you give me something for the pain?" },
  { spanish: "me torcí el tobillo", english: "I sprained my ankle" },
  { spanish: "me corté", english: "I cut myself" },
  { spanish: "necesito puntos", english: "I need stitches" },
  { spanish: "estoy teniendo una reacción alérgica", english: "I’m having an allergic reaction" },
  { spanish: "¿dónde está la comisaría?", english: "where’s the police station?" },
  { spanish: "me robaron", english: "I was robbed" },
  { spanish: "perdí mi cartera", english: "I lost my wallet" },
  { spanish: "necesito reportar un robo", english: "I need to report a theft" },
  { spanish: "es una emergencia", english: "it’s an emergency" },
  { spanish: "¿dónde está el extintor?", english: "where’s the fire extinguisher?" },
  { spanish: "¡cuidado!", english: "watch out!" },
  { spanish: "necesito un abogado", english: "I need a lawyer" },
  { spanish: "me siento inseguro/a", english: "I feel unsafe" },
  { spanish: "¿pueden escoltarme?", english: "can you escort me?" },
  // Expressing Opinions and Emotions
  { spanish: "me parece una locura", english: "I think it’s crazy" },
  { spanish: "estoy harto/a", english: "I’m fed up" },
  { spanish: "me da mucha rabia", english: "it makes me really angry" },
  { spanish: "estoy decepcionado/a", english: "I’m disappointed" },
  { spanish: "me siento frustrado/a", english: "I feel frustrated" },
  { spanish: "es justo lo que necesitaba", english: "it’s exactly what I needed" },
  { spanish: "no me parece correcto", english: "I don’t think it’s right" },
  { spanish: "me da mucha ilusión", english: "I’m really excited about it" },
  { spanish: "estoy confundido/a", english: "I’m confused" },
  { spanish: "me preocupa mucho", english: "I’m really worried" },
  { spanish: "no me lo creo", english: "I can’t believe it" },
  { spanish: "es una gran oportunidad", english: "it’s a great opportunity" },
  { spanish: "me siento inspirado/a", english: "I feel inspired" },
  { spanish: "esto me aburre", english: "this bores me" },
  { spanish: "es un poco decepcionante", english: "it’s a bit disappointing" },
  { spanish: "me encanta la idea", english: "I love the idea" },
  { spanish: "no me gusta para nada", english: "I don’t like it at all" },
  { spanish: "es una pérdida de tiempo", english: "it’s a waste of time" },
  { spanish: "me siento aliviado/a", english: "I feel relieved" },
  { spanish: "es bastante impresionante", english: "it’s pretty impressive" },
  // Miscellaneous Practical Phrases
  { spanish: "¿puedes tomar una foto?", english: "can you take a picture?" },
  { spanish: "necesito cargar mi teléfono", english: "I need to charge my phone" },
  { spanish: "¿dónde está el enchufe?", english: "where’s the outlet?" },
  { spanish: "se me acabó la batería", english: "my battery died" },
  { spanish: "¿puedes prestarme un bolígrafo?", english: "can you lend me a pen?" },
  { spanish: "tengo una cita a las...", english: "I have an appointment at..." },
  { spanish: "llegué tarde, lo siento", english: "I’m late, sorry" },
  { spanish: "¿puedes esperar un segundo?", english: "can you wait a second?" },
  { spanish: "no tengo cambio", english: "I don’t have change" },
  { spanish: "¿puedes darme indicaciones?", english: "can you give me directions?" },
  { spanish: "esto es nuevo para mí", english: "this is new to me" },
  { spanish: "no estoy acostumbrado/a", english: "I’m not used to it" },
  { spanish: "¿es obligatorio?", english: "is it mandatory?" },
  { spanish: "necesito un recibo", english: "I need a receipt" },
  { spanish: "¿puedes escribirlo?", english: "can you write it down?" },
  { spanish: "me olvidé de algo", english: "I forgot something" },
  { spanish: "tengo que cancelar", english: "I have to cancel" },
  { spanish: "¿puedo entrar?", english: "can I come in?" },
  { spanish: "¿está permitido fumar?", english: "is smoking allowed?" },
  { spanish: "necesito un paraguas", english: "I need an umbrella" },
  { spanish: "está empezando a llover", english: "it’s starting to rain" },
  { spanish: "¿dónde dejo esto?", english: "where do I leave this?" },
  { spanish: "no toques eso", english: "don’t touch that" },
  { spanish: "¿puedo usar tu teléfono?", english: "can I use your phone?" },
  { spanish: "tengo una duda", english: "I have a doubt" },
  { spanish: "¿es confiable?", english: "is it reliable?" },
  { spanish: "parece sospechoso", english: "it seems suspicious" },
  { spanish: "necesito confirmación", english: "I need confirmation" },
  { spanish: "¿puedes explicármelo otra vez?", english: "can you explain it again?" },
  { spanish: "esto me está costando", english: "this is tough for me" },
  { spanish: "voy a intentarlo", english: "I’m going to try" },
  { spanish: "me rindo", english: "I give up" },
  { spanish: "es más complicado de lo que pensaba", english: "it’s more complicated than I thought" },
  { spanish: "tengo que pensarlo", english: "I need to think about it" },
  { spanish: "es una decisión difícil", english: "it’s a tough decision" },
  { spanish: "no quiero meter la pata", english: "I don’t want to mess up" },
  { spanish: "esto me está volviendo loco/a", english: "this is driving me crazy" },
  { spanish: "necesito un descanso", english: "I need a break" },
  { spanish: "vamos paso a paso", english: "let’s take it step by step" },
  { spanish: "¿puedes darme un ejemplo?", english: "can you give me an example?" },
  { spanish: "es justo lo que quería", english: "it’s exactly what I wanted" },
  { spanish: "mejor de lo esperado", english: "better than expected" },
  { spanish: "no es para tanto", english: "it’s not a big deal" },
  { spanish: "¿cuál es el plan?", english: "what’s the plan?" },
  { spanish: "me pillaste desprevenido/a", english: "you caught me off guard" },
  { spanish: "es un malentendido", english: "it’s a misunderstanding" },
  { spanish: "¿puedes aclararlo?", english: "can you clarify?" },
  { spanish: "no es mi estilo", english: "it’s not my style" },
  { spanish: "me siento fuera de lugar", english: "I feel out of place" },
  { spanish: "esto no tiene sentido", english: "this doesn’t make sense" },
  { spanish: "es un poco raro", english: "it’s a bit weird" },
  { spanish: "mejor dejémoslo ahí", english: "let’s leave it at that" },
  { spanish: "no quiero discutir", english: "I don’t want to argue" },
  { spanish: "vamos a cambiar de tema", english: "let’s change the subject" },
  { spanish: "espero no molestarte", english: "I hope I’m not bothering you" },
  { spanish: "gracias por la paciencia", english: "thanks for your patience" },
  { spanish: "esto significa mucho para mí", english: "this means a lot to me" },
  { spanish: "te lo agradezco de verdad", english: "I really appreciate it" },
  { spanish: "me salvaste la vida", english: "you saved my life" },
  { spanish: "sin ti no lo hubiera logrado", english: "I couldn’t have done it without you" },
  { spanish: "es un detalle muy bonito", english: "it’s a really nice touch" },
  { spanish: "me hiciste el día", english: "you made my day" },
  { spanish: "eres un sol", english: "you’re a gem" },
  { spanish: "¡qué buena vibra!", english: "what great vibes!" },
  { spanish: "esto es inolvidable", english: "this is unforgettable" },
  { spanish: "me siento como en casa", english: "I feel at home" }
],
            
adjectives: [
  { spanish: "accesible", english: "accessible" },
  { spanish: "acogedor", english: "cozy" },
  { spanish: "actual", english: "current" },
  { spanish: "adecuado", english: "appropriate" },
  { spanish: "agradable", english: "pleasant" },
  { spanish: "ahorrador", english: "thrifty" },
  { spanish: "alegre", english: "cheerful" },
  { spanish: "alentador", english: "encouraging" },
  { spanish: "alto", english: "tall/high" },
  { spanish: "amable", english: "kind" },
  { spanish: "ambicioso", english: "ambitious" },
  { spanish: "amplio", english: "spacious" },
  { spanish: "antiguo", english: "old/ancient" },
  { spanish: "anunciado", english: "advertised" },
  { spanish: "apasionado", english: "passionate" },
  { spanish: "apropiado", english: "suitable" },
  { spanish: "arriesgado", english: "risky" },
  { spanish: "arrogante", english: "arrogant" },
  { spanish: "asequible", english: "affordable" },
  { spanish: "atractivo", english: "attractive" },
  { spanish: "auténtico", english: "authentic" },
  { spanish: "avanzado", english: "advanced" },
  { spanish: "aventurero", english: "adventurous" },
  { spanish: "bajo", english: "short/low" },
  { spanish: "barato", english: "cheap" },
  { spanish: "bello", english: "beautiful" },
  { spanish: "beneficioso", english: "beneficial" },
  { spanish: "brillante", english: "bright/brilliant" },
  { spanish: "bullicioso", english: "bustling" },
  { spanish: "caliente", english: "hot" },
  { spanish: "cálido", english: "warm" },
  { spanish: "calmado", english: "calm" },
  { spanish: "capaz", english: "capable" },
  { spanish: "carismático", english: "charismatic" },
  { spanish: "caro", english: "expensive" },
  { spanish: "caótico", english: "chaotic" },
  { spanish: "cercano", english: "nearby" },
  { spanish: "cómodo", english: "comfortable" },
  { spanish: "complicado", english: "complicated" },
  { spanish: "comprensivo", english: "understanding" },
  { spanish: "confiable", english: "reliable" },
  { spanish: "confuso", english: "confusing" },
  { spanish: "conocido", english: "well-known" },
  { spanish: "considerado", english: "considerate" },
  { spanish: "constante", english: "consistent" },
  { spanish: "contagioso", english: "contagious" },
  { spanish: "contento", english: "happy" },
  { spanish: "conveniente", english: "convenient" },
  { spanish: "cooperativo", english: "cooperative" },
  { spanish: "corriente", english: "ordinary" },
  { spanish: "costoso", english: "costly" },
  { spanish: "creativo", english: "creative" },
  { spanish: "crítico", english: "critical" },
  { spanish: "crucial", english: "crucial" },
  { spanish: "cuidadoso", english: "careful" },
  { spanish: "culto", english: "cultured" },
  { spanish: "curioso", english: "curious" },
  { spanish: "decepcionante", english: "disappointing" },
  { spanish: "decidido", english: "determined" },
  { spanish: "dedicado", english: "dedicated" },
  { spanish: "definitivo", english: "definitive" },
  { spanish: "delicado", english: "delicate" },
  { spanish: "delicioso", english: "delicious" },
  { spanish: "dependiente", english: "dependent" },
  { spanish: "deprimente", english: "depressing" },
  { spanish: "desafiante", english: "challenging" },
  { spanish: "desagradable", english: "unpleasant" },
  { spanish: "desastroso", english: "disastrous" },
  { spanish: "desconfiado", english: "distrustful" },
  { spanish: "desconsiderado", english: "inconsiderate" },
  { spanish: "desorganizado", english: "disorganized" },
  { spanish: "detallado", english: "detailed" },
  { spanish: "diferente", english: "different" },
  { spanish: "difícil", english: "difficult" },
  { spanish: "dinámico", english: "dynamic" },
  { spanish: "directo", english: "direct" },
  { spanish: "discreto", english: "discreet" },
  { spanish: "divertido", english: "fun" },
  { spanish: "dramático", english: "dramatic" },
  { spanish: "duradero", english: "lasting" },
  { spanish: "económico", english: "economical" },
  { spanish: "educado", english: "polite" },
  { spanish: "eficaz", english: "effective" },
  { spanish: "eficiente", english: "efficient" },
  { spanish: "elegante", english: "elegant" },
  { spanish: "emocionado", english: "excited" },
  { spanish: "emocionante", english: "exciting" },
  { spanish: "encantador", english: "charming" },
  { spanish: "enérgico", english: "energetic" },
  { spanish: "enfadado", english: "angry" },
  { spanish: "enfermo", english: "sick" },
  { spanish: "enorme", english: "enormous" },
  { spanish: "entretenido", english: "entertaining" },
  { spanish: "entusiasta", english: "enthusiastic" },
  { spanish: "escalofriante", english: "creepy" },
  { spanish: "escandaloso", english: "scandalous" },
  { spanish: "especial", english: "special" },
  { spanish: "espectacular", english: "spectacular" },
  { spanish: "espontáneo", english: "spontaneous" },
  { spanish: "estable", english: "stable" },
  { spanish: "estiloso", english: "stylish" },
  { spanish: "estresado", english: "stressed" },
  { spanish: "estricto", english: "strict" },
  { spanish: "estúpido", english: "stupid" },
  { spanish: "exagerado", english: "exaggerated" },
  { spanish: "excelente", english: "excellent" },
  { spanish: "exigente", english: "demanding" },
  { spanish: "exótico", english: "exotic" },
  { spanish: "experimentado", english: "experienced" },
  { spanish: "extraordinario", english: "extraordinary" },
  { spanish: "extravagante", english: "extravagant" },
  { spanish: "fácil", english: "easy" },
  { spanish: "falso", english: "false" },
  { spanish: "famoso", english: "famous" },
  { spanish: "fantástico", english: "fantastic" },
  { spanish: "fascinante", english: "fascinating" },
  { spanish: "favorable", english: "favorable" },
  { spanish: "feliz", english: "happy" },
  { spanish: "fiable", english: "trustworthy" },
  { spanish: "fiel", english: "faithful" },
  { spanish: "firme", english: "firm" },
  { spanish: "flexible", english: "flexible" },
  { spanish: "flojo", english: "lazy" },
  { spanish: "formal", english: "formal" },
  { spanish: "frágil", english: "fragile" },
  { spanish: "franco", english: "frank" },
  { spanish: "frecuente", english: "frequent" },
  { spanish: "frío", english: "cold" },
  { spanish: "frustrado", english: "frustrated" },
  { spanish: "fuerte", english: "strong" },
  { spanish: "funcional", english: "functional" },
  { spanish: "generoso", english: "generous" },
  { spanish: "genial", english: "great" },
  { spanish: "grave", english: "serious" },
  { spanish: "grueso", english: "thick" },
  { spanish: "habilidoso", english: "skillful" },
  { spanish: "hábil", english: "able" },
  { spanish: "hermoso", english: "beautiful" },
  { spanish: "histórico", english: "historic" },
  { spanish: "honesto", english: "honest" },
  { spanish: "horrible", english: "horrible" },
  { spanish: "húmedo", english: "humid" },
  { spanish: "humilde", english: "humble" },
  { spanish: "ideal", english: "ideal" },
  { spanish: "idóneo", english: "suitable" },
  { spanish: "ignorante", english: "ignorant" },
  { spanish: "imparcial", english: "impartial" },
  { spanish: "impaciente", english: "impatient" },
  { spanish: "impecable", english: "impeccable" },
  { spanish: "importante", english: "important" },
  { spanish: "imposible", english: "impossible" },
  { spanish: "impresionante", english: "impressive" },
  { spanish: "imprevisible", english: "unpredictable" },
  { spanish: "inapropiado", english: "inappropriate" },
  { spanish: "increíble", english: "incredible" },
  { spanish: "independiente", english: "independent" },
  { spanish: "indiferente", english: "indifferent" },
  { spanish: "indirecto", english: "indirect" },
  { spanish: "inesperado", english: "unexpected" },
  { spanish: "inestable", english: "unstable" },
  { spanish: "inferior", english: "inferior" },
  { spanish: "influyente", english: "influential" },
  { spanish: "informal", english: "informal" },
  { spanish: "ingenioso", english: "ingenious" },
  { spanish: "injusto", english: "unfair" },
  { spanish: "inmenso", english: "immense" },
  { spanish: "inocente", english: "innocent" },
  { spanish: "inquieto", english: "restless" },
  { spanish: "insatisfecho", english: "dissatisfied" },
  { spanish: "inseguro", english: "insecure" },
  { spanish: "insoportable", english: "unbearable" },
  { spanish: "inspirador", english: "inspiring" },
  { spanish: "inteligente", english: "intelligent" },
  { spanish: "intenso", english: "intense" },
  { spanish: "interesante", english: "interesting" },
  { spanish: "internacional", english: "international" },
  { spanish: "inútil", english: "useless" },
  { spanish: "invaluable", english: "invaluable" },
  { spanish: "irritante", english: "irritating" },
  { spanish: "joven", english: "young" },
  { spanish: "jubilado", english: "retired" },
  { spanish: "justo", english: "fair" },
  { spanish: "largo", english: "long" },
  { spanish: "leal", english: "loyal" },
  { spanish: "lento", english: "slow" },
  { spanish: "ligero", english: "light" },
  { spanish: "limpio", english: "clean" },
  { spanish: "lindo", english: "cute" },
  { spanish: "lógico", english: "logical" },
  { spanish: "lujoso", english: "luxurious" },
  { spanish: "maduro", english: "mature" },
  { spanish: "maleducado", english: "rude" },
  { spanish: "maravilloso", english: "wonderful" },
  { spanish: "mediocre", english: "mediocre" },
  { spanish: "mejor", english: "better" },
  { spanish: "memorable", english: "memorable" },
  { spanish: "misterioso", english: "mysterious" },
  { spanish: "moderno", english: "modern" },
  { spanish: "molesto", english: "annoying" },
  { spanish: "motivado", english: "motivated" },
  { spanish: "nervioso", english: "nervous" },
  { spanish: "nítido", english: "clear" },
  { spanish: "novedoso", english: "innovative" },
  { spanish: "nuevo", english: "new" },
  { spanish: "numeroso", english: "numerous" },
  { spanish: "obvio", english: "obvious" },
  { spanish: "ocupado", english: "busy" },
  { spanish: "odioso", english: "hateful" },
  { spanish: "ofensivo", english: "offensive" },
  { spanish: "oportuno", english: "timely" },
  { spanish: "optimista", english: "optimistic" },
  { spanish: "organizado", english: "organized" },
  { spanish: "original", english: "original" },
  { spanish: "paciente", english: "patient" },
  { spanish: "peligroso", english: "dangerous" },
  { spanish: "pequeño", english: "small" },
  { spanish: "perfecto", english: "perfect" },
  { spanish: "permanente", english: "permanent" },
  { spanish: "pesado", english: "heavy" },
  { spanish: "pesimista", english: "pessimistic" },
  { spanish: "pobre", english: "poor" },
  { spanish: "poderoso", english: "powerful" },
  { spanish: "popular", english: "popular" },
  { spanish: "positivo", english: "positive" },
  { spanish: "posible", english: "possible" },
  { spanish: "práctico", english: "practical" },
  { spanish: "preciso", english: "precise" },
  { spanish: "preferible", english: "preferable" },
  { spanish: "preocupado", english: "worried" },
  { spanish: "prestigioso", english: "prestigious" },
  { spanish: "productivo", english: "productive" },
  { spanish: "profesional", english: "professional" },
  { spanish: "profundo", english: "deep" },
  { spanish: "prometedor", english: "promising" },
  { spanish: "pronto", english: "prompt" },
  { spanish: "próximo", english: "next" },
  { spanish: "público", english: "public" },
  { spanish: "puro", english: "pure" },
  { spanish: "rápido", english: "fast" },
  { spanish: "raro", english: "strange" },
  { spanish: "razonable", english: "reasonable" },
  { spanish: "reciente", english: "recent" },
  { spanish: "reconfortante", english: "comforting" },
  { spanish: "recto", english: "straight" },
  { spanish: "recuperado", english: "recovered" },
  { spanish: "refrescante", english: "refreshing" },
  { spanish: "regular", english: "average" },
  { spanish: "relajado", english: "relaxed" },
  { spanish: "relevante", english: "relevant" },
  { spanish: "rentable", english: "profitable" },
  { spanish: "reservado", english: "reserved" },
  { spanish: "resistente", english: "resistant" },
  { spanish: "respetuoso", english: "respectful" },
  { spanish: "responsable", english: "responsible" },
  { spanish: "rico", english: "rich" },
  { spanish: "ridículo", english: "ridiculous" },
  { spanish: "robusto", english: "robust" },
  { spanish: "romántico", english: "romantic" },
  { spanish: "ruidoso", english: "noisy" },
  { spanish: "sano", english: "healthy" },
  { spanish: "satisfactorio", english: "satisfactory" },
  { spanish: "seguro", english: "safe" },
  { spanish: "sencillo", english: "simple" },
  { spanish: "sensato", english: "sensible" },
  { spanish: "sensible", english: "sensitive" },
  { spanish: "serio", english: "serious" },
  { spanish: "silencioso", english: "quiet" },
  { spanish: "simpático", english: "friendly" },
  { spanish: "sincero", english: "sincere" },
  { spanish: "singular", english: "unique" },
  { spanish: "situado", english: "located" },
  { spanish: "sofisticado", english: "sophisticated" },
  { spanish: "sólido", english: "solid" },
  { spanish: "soltero", english: "single" },
  { spanish: "sorprendente", english: "surprising" },
  { spanish: "suave", english: "soft" },
  { spanish: "subestimado", english: "underestimated" },
  { spanish: "sucio", english: "dirty" },
  { spanish: "superior", english: "superior" },
  { spanish: "suspicaz", english: "suspicious" },
  { spanish: "talentoso", english: "talented" },
  { spanish: "técnico", english: "technical" },
  { spanish: "temeroso", english: "fearful" },
  { spanish: "tenso", english: "tense" },
  { spanish: "terrible", english: "terrible" },
  { spanish: "tímido", english: "shy" },
  { spanish: "típico", english: "typical" },
  { spanish: "tolerante", english: "tolerant" },
  { spanish: "tóxico", english: "toxic" },
  { spanish: "tranquilo", english: "calm" },
  { spanish: "triste", english: "sad" },
  { spanish: "unido", english: "united" },
  { spanish: "útil", english: "useful" },
  { spanish: "valiente", english: "brave" },
  { spanish: "valioso", english: "valuable" },
  { spanish: "variado", english: "varied" },
  { spanish: "verdadero", english: "true" },
  { spanish: "versátil", english: "versatile" },
  { spanish: "viejo", english: "old" },
  { spanish: "violento", english: "violent" },
  { spanish: "visible", english: "visible" },
  { spanish: "vivo", english: "lively" },
  { spanish: "vulnerable", english: "vulnerable" }
]
        };
        const grammarLessons = {
    // B1 Lessons (25 total)
    'b1-lesson1': {
        description: `
            <h3>Present Tense Regular Verbs</h3>
            <p>Regular verbs in the present tense follow predictable patterns based on their endings: -ar, -er, -ir.</p>
            <p><strong>-ar verbs</strong>: -o, -as, -a, -amos, -áis, -an</p>
            <p>Example: <em>hablar</em> (to speak)</p>
            <ul>
                <li>yo hablo</li>
                <li>tú hablas</li>
                <li>él/ella habla</li>
                <li>nosotros hablamos</li>
                <li>vosotros habláis</li>
                <li>ellos/ellas hablan</li>
            </ul>
            <p><strong>-er verbs</strong>: -o, -es, -e, -emos, -éis, -en</p>
            <p><strong>-ir verbs</strong>: -o, -es, -e, -imos, -ís, -en</p>
        `,
        exercises: [
            { question: "Conjugate 'comer' for 'tú' in the present tense.", options: ["comes", "come", "comemos", "comen"], correct: "comes" },
            { question: "Conjugate 'vivir' for 'ellos' in the present tense.", options: ["viven", "vive", "vivimos", "vivo"], correct: "viven" },
            { question: "Conjugate 'hablar' for 'nosotros' in the present tense.", options: ["hablamos", "hablan", "hablo", "hablais"], correct: "hablamos" }
        ]
    },
    'b1-lesson2': {
        description: `
            <h3>Ser vs. Estar</h3>
            <p><em>Ser</em> is used for permanent states (identity, characteristics), while <em>estar</em> is used for temporary states (feelings, location).</p>
            <p>Examples:</p>
            <ul>
                <li><em>Soy estudiante</em> (I am a student - permanent).</li>
                <li><em>Estoy cansado</em> (I am tired - temporary).</li>
            </ul>
        `,
        exercises: [
            { question: "Choose the correct verb: 'Ella ___ muy simpática.'", options: ["es", "está"], correct: "es" },
            { question: "Choose the correct verb: 'Nosotros ___ en la escuela.'", options: ["somos", "estamos"], correct: "estamos" },
            { question: "Choose the correct verb: 'El café ___ caliente.'", options: ["es", "está"], correct: "está" }
        ]
    },
    'b1-lesson3': {
        description: `
            <h3>Direct Object Pronouns</h3>
            <p>Direct object pronouns replace nouns that receive the action: me, te, lo/la, nos, os, los/las.</p>
            <p>Example: <em>Veo el libro</em> → <em>Lo veo</em> (I see it).</p>
        `,
        exercises: [
            { question: "Replace the noun: 'Lavo los platos.'", options: ["los lavo", "lo lavo", "las lavo", "la lavo"], correct: "los lavo" },
            { question: "Replace the noun: 'Ella lee la carta.'", options: ["la lee", "lo lee", "le lee", "los lee"], correct: "la lee" },
            { question: "Complete: 'Nosotros ___ (ver) en el cine.'", options: ["los vemos", "lo vemos", "las vemos", "la vemos"], correct: "los vemos" }
        ]
    },
    'b1-lesson4': {
        description: `
            <h3>Present Tense Irregular Verbs</h3>
            <p>Some verbs are irregular in the present tense, like <em>tener</em> (to have): tengo, tienes, tiene, tenemos, tenéis, tienen.</p>
            <p>Example: <em>Yo tengo un perro</em> (I have a dog).</p>
        `,
        exercises: [
            { question: "Conjugate 'hacer' for 'yo' in the present tense.", options: ["hago", "haces", "hace", "hacemos"], correct: "hago" },
            { question: "Conjugate 'salir' for 'tú' in the present tense.", options: ["sales", "sale", "salgo", "salimos"], correct: "sales" },
            { question: "Conjugate 'decir' for 'él' in the present tense.", options: ["dice", "dices", "digo", "dicen"], correct: "dice" }
        ]
    },
    'b1-lesson5': {
        description: `
            <h3>Reflexive Verbs</h3>
            <p>Reflexive verbs indicate the subject acts on itself, using pronouns: me, te, se, nos, os, se.</p>
            <p>Example: <em>Me levanto</em> (I get up).</p>
        `,
        exercises: [
            { question: "Conjugate 'lavarse' for 'yo' in the present tense.", options: ["me lavo", "te lavas", "se lava", "nos lavamos"], correct: "me lavo" },
            { question: "Conjugate 'vestirse' for 'tú' in the present tense.", options: ["te vistes", "me visto", "se viste", "nos vestimos"], correct: "te vistes" },
            { question: "Conjugate 'acostarse' for 'ellos' in the present tense.", options: ["se acuestan", "me acuesto", "te acuestas", "nos acostamos"], correct: "se acuestan" }
        ]
    },
    'b1-lesson6': {
        description: `
            <h3>Preterite Tense Regular Verbs</h3>
            <p>The preterite tense describes completed past actions. Regular endings:</p>
            <ul>
                <li><strong>-ar verbs</strong>: -é, -aste, -ó, -amos, -asteis, -aron</li>
                <li><strong>-er/-ir verbs</strong>: -í, -iste, -ió, -imos, -isteis, -ieron</li>
            </ul>
            <p>Example: <em>comer</em> → <em>comí</em> (I ate).</p>
        `,
        exercises: [
            { question: "Conjugate 'hablar' in the preterite for 'yo'.", options: ["hablé", "hablaste", "habló", "hablamos"], correct: "hablé" },
            { question: "Conjugate 'vivir' in the preterite for 'tú'.", options: ["viviste", "viví", "vivió", "vivimos"], correct: "viviste" },
            { question: "Conjugate 'comer' in the preterite for 'ellos'.", options: ["comieron", "comí", "comiste", "comimos"], correct: "comieron" }
        ]
    },
    'b1-lesson7': {
        description: `
            <h3>Possessive Adjectives</h3>
            <p>Possessive adjectives show ownership and agree with the noun: mi, tu, su, nuestro/a, vuestro/a, su.</p>
            <p>Example: <em>Mi casa es grande</em> (My house is big).</p>
        `,
        exercises: [
            { question: "Choose the correct possessive: '___ libro es rojo.' (my)", options: ["mi", "tu", "su", "nuestro"], correct: "mi" },
            { question: "Choose the correct possessive: '___ padres viven lejos.' (our)", options: ["mi", "tu", "su", "nuestros"], correct: "nuestros" },
            { question: "Choose the correct possessive: 'Es ___ coche.' (your, singular)", options: ["mi", "tu", "su", "nuestro"], correct: "tu" }
        ]
    },
    'b1-lesson8': {
        description: `
            <h3>Adverbs of Frequency</h3>
            <p>Adverbs like <em>siempre</em> (always), <em>a veces</em> (sometimes), <em>nunca</em> (never) describe how often something happens.</p>
            <p>Example: <em>Siempre estudio por la noche</em> (I always study at night).</p>
        `,
        exercises: [
            { question: "Choose the correct adverb: '___ voy al cine.' (sometimes)", options: ["siempre", "a veces", "nunca", "todos los días"], correct: "a veces" },
            { question: "Choose the correct adverb: 'Ella ___ llega tarde.' (never)", options: ["siempre", "a veces", "nunca", "a menudo"], correct: "nunca" },
            { question: "Choose the correct adverb: '___ comemos juntos.' (always)", options: ["siempre", "a veces", "nunca", "rara vez"], correct: "siempre" }
        ]
    },
    'b1-lesson9': {
        description: `
            <h3>Demonstrative Adjectives</h3>
            <p>Demonstratives (este, ese, aquel) indicate proximity and agree with the noun: este (this), ese (that), aquel (that over there).</p>
            <p>Example: <em>Este libro es mío</em> (This book is mine).</p>
        `,
        exercises: [
            { question: "Choose the correct demonstrative: '___ casa es bonita.' (this)", options: ["esta", "esa", "aquella", "este"], correct: "esta" },
            { question: "Choose the correct demonstrative: '___ perro está lejos.' (that over there)", options: ["este", "ese", "aquel", "esta"], correct: "aquel" },
            { question: "Choose the correct demonstrative: '___ libros son nuevos.' (those)", options: ["estos", "esos", "aquellos", "estas"], correct: "esos" }
        ]
    },
    'b1-lesson10': {
        description: `
            <h3>Basic Prepositions</h3>
            <p>Prepositions like <em>a</em>, <em>de</em>, <em>en</em>, <em>con</em>, <em>por</em>, and <em>para</em> show relationships.</p>
            <p>Example: <em>Vivo en España</em> (I live in Spain).</p>
        `,
        exercises: [
            { question: "Choose the correct preposition: 'Voy ___ la escuela.'", options: ["a", "de", "en", "con"], correct: "a" },
            { question: "Choose the correct preposition: 'El libro es ___ María.'", options: ["a", "de", "en", "para"], correct: "de" },
            { question: "Choose the correct preposition: 'Hablo ___ mis amigos.'", options: ["a", "de", "con", "en"], correct: "con" }
        ]
    },
    'b1-lesson11': {
        description: `
            <h3>Imperfect Tense Regular Verbs</h3>
            <p>The imperfect tense describes ongoing or habitual past actions. Regular endings:</p>
            <ul>
                <li><strong>-ar verbs</strong>: -aba, -abas, -aba, -ábamos, -abais, -aban</li>
                <li><strong>-er/-ir verbs</strong>: -ía, -ías, -ía, -íamos, -íais, -ían</li>
            </ul>
            <p>Example: <em>vivir</em> → <em>vivía</em> (I was living).</p>
        `,
        exercises: [
            { question: "Conjugate 'hablar' in the imperfect for 'yo'.", options: ["hablaba", "hablabas", "habló", "hablábamos"], correct: "hablaba" },
            { question: "Conjugate 'comer' in the imperfect for 'tú'.", options: ["comías", "comía", "comiste", "comíamos"], correct: "comías" },
            { question: "Conjugate 'vivir' in the imperfect for 'ellos'.", options: ["vivían", "vivía", "vivieron", "vivíamos"], correct: "vivían" }
        ]
    },
    'b1-lesson12': {
        description: `
            <h3>Definite and Indefinite Articles</h3>
            <p>Definite articles (el, la, los, las) specify a noun, while indefinite articles (un, una, unos, unas) are less specific.</p>
            <p>Example: <em>El perro</em> (the dog), <em>Un perro</em> (a dog).</p>
        `,
        exercises: [
            { question: "Choose the correct article: '___ gato es negro.' (the)", options: ["el", "la", "los", "las"], correct: "el" },
            { question: "Choose the correct article: 'Necesito ___ silla.' (a)", options: ["un", "una", "unos", "unas"], correct: "una" },
            { question: "Choose the correct article: '___ niños juegan.' (the)", options: ["el", "la", "los", "las"], correct: "los" }
        ]
    },
    'b1-lesson13': {
        description: `
            <h3>Adjectives of Quantity</h3>
            <p>Adjectives like <em>mucho</em>, <em>poco</em>, <em>alguno</em>, and <em>ninguno</em> describe quantity and agree in gender and number with the noun.</p>
            <p>Example: <em>Tengo muchos libros</em> (I have many books).</p>
        `,
        exercises: [
            { question: "Choose the correct adjective: 'Hay ___ agua en la botella.' (little)", options: ["mucha", "poca", "mucho", "poco"], correct: "poca" },
            { question: "Choose the correct adjective: 'No tengo ___ problema.' (no)", options: ["algún", "ningún", "alguna", "ninguna"], correct: "ningún" },
            { question: "Choose the correct adjective: 'Quiero ___ dulces.' (some)", options: ["algún", "algunos", "ningún", "ningunos"], correct: "algunos" }
        ]
    },
    'b1-lesson14': {
        description: `
            <h3>Present Progressive</h3>
            <p>The present progressive describes actions happening now, using <em>estar</em> + gerund (-ando for -ar verbs, -iendo for -er/-ir verbs).</p>
            <p>Example: <em>Estoy estudiando</em> (I am studying).</p>
        `,
        exercises: [
            { question: "Form the present progressive: 'Yo ___ (trabajar).'", options: ["estoy trabajando", "estás trabajando", "está trabajando", "trabajo"], correct: "estoy trabajando" },
            { question: "Form the present progressive: 'Ellos ___ (comer).'", options: ["están comiendo", "estás comiendo", "estoy comiendo", "comen"], correct: "están comiendo" },
            { question: "Form the present progressive: 'Tú ___ (vivir).'", options: ["estás viviendo", "estoy viviendo", "está viviendo", "vives"], correct: "estás viviendo" }
        ]
    },
    'b1-lesson15': {
        description: `
            <h3>Basic Question Words</h3>
            <p>Question words like <em>qué</em>, <em>quién</em>, <em>dónde</em>, <em>cuándo</em>, <em>por qué</em>, and <em>cómo</em> are used to form questions.</p>
            <p>Example: <em>¿Dónde vives?</em> (Where do you live?)</p>
        `,
        exercises: [
            { question: "Choose the correct question word: '___ es tu nombre?'", options: ["Qué", "Quién", "Dónde", "Cómo"], correct: "Qué" },
            { question: "Choose the correct question word: '___ estás aquí?'", options: ["Qué", "Quién", "Por qué", "Cuándo"], correct: "Por qué" },
            { question: "Choose the correct question word: '___ es tu amigo?'", options: ["Qué", "Quién", "Dónde", "Cómo"], correct: "Quién" }
        ]
    },
    'b1-lesson16': {
        description: `
            <h3>Comparatives and Superlatives</h3>
            <p>Comparatives use <em>más...que</em> (more than), <em>menos...que</em> (less than), or <em>tan...como</em> (as...as). Superlatives use <em>el/la más/menos</em>.</p>
            <p>Examples:</p>
            <ul>
                <li><em>Más alto que</em> (taller than)</li>
                <li><em>El más alto</em> (the tallest)</li>
            </ul>
        `,
        exercises: [
            { question: "Complete: 'Ana es ___ alta ___ María.' (more...than)", options: ["más...que", "menos...que", "tan...como", "el más"], correct: "más...que" },
            { question: "Complete: 'Es ___ libro interesante.' (the most)", options: ["el más", "más que", "menos que", "tan como"], correct: "el más" },
            { question: "Complete: 'Juan es ___ rápido ___ Pedro.' (as...as)", options: ["más...que", "menos...que", "tan...como", "el más"], correct: "tan...como" }
        ]
    },
    'b1-lesson17': {
        description: `
            <h3>Negation</h3>
            <p>Use <em>no</em> before the verb to negate a sentence. Double negatives like <em>nada</em>, <em>nadie</em>, <em>nunca</em> are common.</p>
            <p>Example: <em>No veo nada</em> (I don’t see anything).</p>
        `,
        exercises: [
            { question: "Negate: 'Voy a la fiesta.'", options: ["No voy a la fiesta.", "Voy no a la fiesta.", "Voy a no fiesta.", "No voy fiesta."], correct: "No voy a la fiesta." },
            { question: "Choose the correct word: 'No hay ___ en la casa.' (nobody)", options: ["nada", "nadie", "nunca", "ninguno"], correct: "nadie" },
            { question: "Choose the correct word: 'No tengo ___ tiempo.' (no)", options: ["nada", "nadie", "nunca", "ningún"], correct: "ningún" }
        ]
    },
    'b1-lesson18': {
        description: `
            <h3>Stem-Changing Verbs (Present Tense)</h3>
            <p>Stem-changing verbs change their stem vowel in the present tense (e.g., e→ie, o→ue, e→i), except in nosotros/vosotros forms.</p>
            <p>Example: <em>querer</em> (e→ie)</p>
            <ul>
                <li>yo quiero</li>
                <li>tú quieres</li>
                <li>él/ella quiere</li>
                <li>nosotros queremos</li>
                <li>vosotros queréis</li>
                <li>ellos/ellas quieren</li>
            </ul>
        `,
        exercises: [
            { question: "Conjugate 'poder' for 'yo' in the present tense.", options: ["puedo", "puedes", "puede", "podemos"], correct: "puedo" },
            { question: "Conjugate 'dormir' for 'tú' in the present tense.", options: ["duermo", "duermes", "duerme", "dormimos"], correct: "duermes" },
            { question: "Conjugate 'pedir' for 'ellos' in the present tense.", options: ["pido", "pides", "pide", "piden"], correct: "piden" }
        ]
    },
    'b1-lesson19': {
        description: `
            <h3>Adverbs Ending in -mente</h3>
            <p>Adverbs are formed by adding <em>-mente</em> to the feminine form of adjectives.</p>
            <p>Example: <em>rápido</em> → <em>rápida</em> → <em>rápidamente</em> (quickly).</p>
        `,
        exercises: [
            { question: "Form the adverb from 'claro'.", options: ["claramente", "claromente", "clara", "claro"], correct: "claramente" },
            { question: "Form the adverb from 'lento'.", options: ["lentamente", "lentomente", "lenta", "lento"], correct: "lentamente" },
            { question: "Form the adverb from 'fácil'.", options: ["fácilmente", "fácilamente", "fácila", "fácil"], correct: "fácilmente" }
        ]
    },
    'b1-lesson20': {
        description: `
            <h3>Time Expressions</h3>
            <p>Time expressions like <em>hace</em>, <em>desde</em>, and <em>dentro de</em> indicate duration or points in time.</p>
            <p>Examples:</p>
            <ul>
                <li><em>Hace dos años</em> (two years ago)</li>
                <li><em>Desde 2020</em> (since 2020)</li>
            </ul>
        `,
        exercises: [
            { question: "Complete: 'Vivo aquí ___ tres años.' (for)", options: ["hace", "desde", "dentro de", "en"], correct: "desde" },
            { question: "Complete: 'Lo vi ___ una hora.' (ago)", options: ["hace", "desde", "dentro de", "en"], correct: "hace" },
            { question: "Complete: 'Terminaré ___ dos días.' (in)", options: ["hace", "desde", "dentro de", "en"], correct: "dentro de" }
        ]
    },
    'b1-lesson21': {
        description: `
            <h3>Commands (Imperative Mood - Affirmative Tú)</h3>
            <p>The affirmative <em>tú</em> command for regular verbs uses the third-person singular present indicative form. It’s used for giving instructions or orders.</p>
            <ul>
                <li><strong>-ar verbs</strong>: e.g., <em>hablar</em> → <em>habla</em> (speak)</li>
                <li><strong>-er verbs</strong>: e.g., <em>comer</em> → <em>come</em> (eat)</li>
                <li><strong>-ir verbs</strong>: e.g., <em>vivir</em> → <em>vive</em> (live)</li>
            </ul>
            <p>Example: <em>¡Habla conmigo!</em> (Talk to me!)</p>
        `,
        exercises: [
            { question: "Form the affirmative tú command for 'escuchar'.", options: ["escucha", "escuchas", "escuche", "escucho"], correct: "escucha" },
            { question: "Form the affirmative tú command for 'abrir'.", options: ["abre", "abres", "abra", "abro"], correct: "abre" },
            { question: "Form the affirmative tú command for 'cantar'.", options: ["canta", "cantas", "cante", "canto"], correct: "canta" }
        ]
    },
    'b1-lesson22': {
        description: `
            <h3>Introduction to Present Subjunctive</h3>
            <p>The present subjunctive is used for desires, doubts, or suggestions, often after expressions like <em>espero que</em> or <em>quiero que</em>. For regular verbs:</p>
            <ul>
                <li><strong>-ar verbs</strong>: -e, -es, -e, -emos, -éis, -en</li>
                <li><strong>-er/-ir verbs</strong>: -a, -as, -a, -amos, -áis, -an</li>
            </ul>
            <p>Example: <em>Espero que hables</em> (I hope you speak).</p>
        `,
        exercises: [
            { question: "Conjugate 'hablar' for 'tú' after 'espero que'.", options: ["hablas", "hables", "habla", "hablamos"], correct: "hables" },
            { question: "Conjugate 'comer' for 'él' after 'quiero que'.", options: ["come", "coma", "comes", "comamos"], correct: "coma" },
            { question: "Complete: 'Espero que ___ (vivir) aquí.'", options: ["vivas", "vives", "viva", "vivimos"], correct: "vivas" }
        ]
    },
    'b1-lesson23': {
        description: `
            <h3>Indirect Object Pronouns</h3>
            <p>Indirect object pronouns (me, te, le, nos, os, les) indicate to whom or for whom an action is done. They’re placed before conjugated verbs or attached to infinitives.</p>
            <p>Example: <em>Doy un libro a María</em> → <em>Le doy un libro</em> (I give her a book).</p>
        `,
        exercises: [
            { question: "Replace the noun: 'Doy un regalo a Juan.'", options: ["le doy", "lo doy", "me doy", "te doy"], correct: "le doy" },
            { question: "Replace the noun: 'Ella dice la verdad a nosotros.'", options: ["nos dice", "les dice", "lo dice", "te dice"], correct: "nos dice" },
            { question: "Complete: '___ (dar) un regalo a Juan.'", options: ["le doy", "lo doy", "me doy", "te doy"], correct: "le doy" }
        ]
    },
    'b1-lesson24': {
        description: `
            <h3>Preterite Irregular Verbs</h3>
            <p>Some verbs have irregular forms in the preterite tense, such as <em>hacer</em> (to do/make) → <em>hice</em> or <em>ir</em> (to go) → <em>fui</em>.</p>
            <p>Example: <em>venir</em> (to come)</p>
            <ul>
                <li>yo vine</li>
                <li>tú viniste</li>
                <li>él/ella vino</li>
                <li>nosotros vinimos</li>
                <li>vosotros vinisteis</li>
                <li>ellos/ellas vinieron</li>
            </ul>
        `,
        exercises: [
            { question: "Conjugate 'hacer' for 'yo' in the preterite.", options: ["hice", "hiciste", "hizo", "hicimos"], correct: "hice" },
            { question: "Conjugate 'ir' for 'tú' in the preterite.", options: ["fui", "fuiste", "fue", "fuimos"], correct: "fuiste" },
            { question: "Conjugate 'venir' for 'ellos' in the preterite.", options: ["vine", "viniste", "vino", "vinieron"], correct: "vinieron" }
        ]
    },
    'b1-lesson25': {
        description: `
            <h3>Gustar and Similar Verbs</h3>
            <p>Verbs like <em>gustar</em> (to like), <em>interesar</em> (to interest), and <em>doler</em> (to hurt) use indirect object pronouns and are structured differently from English.</p>
            <p>Example: <em>Me gusta el libro</em> (I like the book, lit. The book is pleasing to me).</p>
            <ul>
                <li>Singular: <em>gusta</em></li>
                <li>Plural: <em>gustan</em></li>
            </ul>
        `,
        exercises: [
            { question: "Complete: 'A mí ___ la música.' (I like)", options: ["me gusta", "me gustan", "te gusta", "le gusta"], correct: "me gusta" },
            { question: "Complete: 'A ellos ___ los libros.' (They like)", options: ["les gusta", "les gustan", "me gustan", "te gustan"], correct: "les gustan" },
            { question: "Complete: 'A ti ___ el pie?' (Does it hurt)", options: ["te duele", "te duelen", "me duele", "le duele"], correct: "te duele" }
        ]
    },
    'b2-lesson1': {
        description: `
            <h3>Present Subjunctive Regular Verbs</h3>
            <p>The present subjunctive is used for desires, doubts, wishes, or hypothetical situations, often after expressions like <em>espero que</em> or <em>quiero que</em>. Regular verb endings are:</p>
            <ul>
                <li><strong>-ar verbs</strong>: -e, -es, -e, -emos, -éis, -en</li>
                <li><strong>-er/-ir verbs</strong>: -a, -as, -a, -amos, -áis, -an</li>
            </ul>
            <p>Example: <em>trabajar</em> (to work)</p>
            <ul>
                <li>que yo trabaje</li>
                <li>que tú trabajes</li>
                <li>que él/ella trabaje</li>
                <li>que nosotros trabajemos</li>
                <li>que vosotros trabajéis</li>
                <li>que ellos/ellas trabajen</li>
            </ul>
        `,
        exercises: [
            { question: "Conjugate 'hablar' in the present subjunctive for 'tú'.", options: ["hablas", "hables", "habla", "hablamos"], correct: "hables" },
            { question: "Conjugate 'comer' in the present subjunctive for 'él'.", options: ["come", "coma", "comes", "comamos"], correct: "coma" },
            { question: "Conjugate 'vivir' in the present subjunctive for 'nosotros'.", options: ["vivimos", "vivamos", "vivan", "vivas"], correct: "vivamos" }
        ]
    },
    'b2-lesson2': {
        description: `
            <h3>Past Perfect Tense</h3>
            <p>The past perfect (pluscuamperfecto) describes actions completed before another past action. It uses the imperfect of <em>haber</em> (había, habías, había, habíamos, habíais, habían) plus the past participle (-ado for -ar verbs, -ido for -er/-ir verbs).</p>
            <p>Example: <em>vivir</em> (to live)</p>
            <ul>
                <li>yo había vivido</li>
                <li>tú habías vivido</li>
                <li>él/ella había vivido</li>
                <li>nosotros habíamos vivido</li>
                <li>vosotros habíais vivido</li>
                <li>ellos/ellas habían vivido</li>
            </ul>
        `,
        exercises: [
            { question: "Conjugate 'hablar' in the past perfect for 'yo'.", options: ["había hablado", "habías hablado", "había hablada", "habíamos hablado"], correct: "había hablado" },
            { question: "Conjugate 'comer' in the past perfect for 'nosotros'.", options: ["había comido", "habíamos comido", "habíais comido", "habían comido"], correct: "habíamos comido" },
            { question: "Complete: 'Ella ___ (vivir) en España antes de mudarse.'", options: ["había vivido", "habías vivido", "había viviendo", "habíamos vivido"], correct: "había vivido" }
        ]
    },
    'b2-lesson3': {
        description: `
            <h3>Indirect Object Pronouns</h3>
            <p>Indirect object pronouns indicate to whom or for whom an action is done: me, te, le, nos, os, les. They are placed before conjugated verbs or attached to infinitives/gerunds.</p>
            <p>Example: <em>Escribo una carta a María</em> → <em>Le escribo una carta</em> (I write her a letter).</p>
        `,
        exercises: [
            { question: "Replace the noun: 'Doy un regalo a Juan.'", options: ["le doy", "lo doy", "me doy", "te doy"], correct: "le doy" },
            { question: "Replace the noun: 'Ella cuenta un cuento a los niños.'", options: ["les cuenta", "los cuenta", "le cuenta", "nos cuenta"], correct: "les cuenta" },
            { question: "Complete: 'Nosotros ___ (enviar) invitaciones a los amigos.'", options: ["les enviamos", "los enviamos", "le enviamos", "te enviamos"], correct: "les enviamos" }
        ]
    },
    'b2-lesson4': {
        description: `
            <h3>Imperfect Subjunctive</h3>
            <p>The imperfect subjunctive is used for hypothetical situations, wishes, or doubts in the past, often after <em>si</em> or verbs like <em>quería que</em>. Endings are:</p>
            <ul>
                <li><strong>-ar verbs</strong>: -ara, -aras, -ara, -áramos, -arais, -aran</li>
                <li><strong>-er/-ir verbs</strong>: -iera, -ieras, -iera, -iéramos, -ierais, -ieran</li>
            </ul>
            <p>Example: <em>hablar</em> → <em>que yo hablara</em> (that I was speaking).</p>
        `,
        exercises: [
            { question: "Conjugate 'vivir' in the imperfect subjunctive for 'yo'.", options: ["viviera", "vivieras", "viviera", "viviéramos"], correct: "viviera" },
            { question: "Conjugate 'comer' in the imperfect subjunctive for 'tú'.", options: ["comiera", "comieras", "comiera", "comiéramos"], correct: "comieras" },
            { question: "Complete: 'Quería que nosotros ___ (trabajar) juntos.'", options: ["trabajáramos", "trabajamos", "trabajaran", "trabajas"], correct: "trabajáramos" }
        ]
    },
    'b2-lesson5': {
        description: `
            <h3>Future Tense</h3>
            <p>The future tense expresses actions that will happen. It’s formed by adding endings to the infinitive: -é, -ás, -á, -emos, -éis, -án.</p>
            <p>Example: <em>aprender</em> (to learn)</p>
            <ul>
                <li>yo aprenderé</li>
                <li>tú aprenderás</li>
                <li>él/ella aprenderá</li>
                <li>nosotros aprenderemos</li>
                <li>vosotros aprenderéis</li>
                <li>ellos/ellas aprenderán</li>
            </ul>
        `,
        exercises: [
            { question: "Conjugate 'vivir' in the future tense for 'yo'.", options: ["viviré", "vivirás", "vivirá", "viviremos"], correct: "viviré" },
            { question: "Conjugate 'comer' in the future tense for 'tú'.", options: ["comeré", "comerás", "comerá", "comeremos"], correct: "comerás" },
            { question: "Conjugate 'hablar' in the future tense for 'ellos'.", options: ["hablaré", "hablarás", "hablará", "hablarán"], correct: "hablarán" }
        ]
    },
    'b2-lesson6': {
        description: `
            <h3>Conditional Tense</h3>
            <p>The conditional tense expresses what would happen under certain conditions. It uses the infinitive plus endings: -ía, -ías, -ía, -íamos, -íais, -ían.</p>
            <p>Example: <em>comer</em> (to eat)</p>
            <ul>
                <li>yo comería</li>
                <li>tú comerías</li>
                <li>él/ella comería</li>
                <li>nosotros comeríamos</li>
                <li>vosotros comeríais</li>
                <li>ellos/ellas comerían</li>
            </ul>
        `,
        exercises: [
            { question: "Conjugate 'hablar' in the conditional tense for 'yo'.", options: ["hablaría", "hablarías", "hablaría", "hablaríamos"], correct: "hablaría" },
            { question: "Conjugate 'vivir' in the conditional tense for 'tú'.", options: ["viviría", "vivirías", "viviría", "viviríamos"], correct: "vivirías" },
            { question: "Complete: 'Ellos ___ (aprender) si estudiaran.'", options: ["aprenderían", "aprenderías", "aprendería", "aprenderíamos"], correct: "aprenderían" }
        ]
    },
    'b2-lesson7': {
        description: `
            <h3>Por vs. Para</h3>
            <p><em>Por</em> and <em>para</em> are prepositions with distinct uses:</p>
            <ul>
                <li><strong>Por</strong>: Indicates cause, means, duration, or exchange (e.g., <em>Gracias por tu ayuda</em> - Thanks for your help).</li>
                <li><strong>Para</strong>: Indicates purpose, destination, or deadlines (e.g., <em>Estudio para aprender</em> - I study to learn).</li>
            </ul>
        `,
        exercises: [
            { question: "Choose the correct preposition: 'Trabajo ___ ganar dinero.'", options: ["por", "para"], correct: "para" },
            { question: "Choose the correct preposition: 'Caminé ___ el parque.'", options: ["por", "para"], correct: "por" },
            { question: "Choose the correct preposition: 'Compré un regalo ___ mi madre.'", options: ["por", "para"], correct: "para" }
        ]
    },
    'b2-lesson8': {
        description: `
            <h3>Relative Pronouns</h3>
            <p>Relative pronouns (que, quien, el que, lo que) connect clauses and refer to a noun or idea. <em>Que</em> is the most common, used for people or things.</p>
            <p>Example: <em>El libro que leí es interesante</em> (The book that I read is interesting).</p>
        `,
        exercises: [
            { question: "Choose the correct pronoun: 'La chica ___ conocí es amable.'", options: ["que", "quien", "el que", "lo que"], correct: "que" },
            { question: "Choose the correct pronoun: 'No entiendo ___ dijiste.'", options: ["que", "quien", "el que", "lo que"], correct: "lo que" },
            { question: "Choose the correct pronoun: 'Es una persona ___ ayuda a todos.'", options: ["que", "quien", "el que", "lo que"], correct: "quien" }
        ]
    },
    'b2-lesson9': {
        description: `
            <h3>Preterite vs. Imperfect</h3>
            <p>The preterite describes completed actions, while the imperfect describes ongoing or habitual past actions.</p>
            <ul>
                <li><strong>Preterite</strong>: <em>Ayer comí pizza</em> (Yesterday I ate pizza).</li>
                <li><strong>Imperfect</strong>: <em>Comía pizza cada viernes</em> (I was eating pizza every Friday).</li>
            </ul>
        `,
        exercises: [
            { question: "Choose the correct tense: 'Ayer ___ (llover) todo el día.'", options: ["llovió", "llovía"], correct: "llovió" },
            { question: "Choose the correct tense: 'Cuando era niño, ___ (jugar) mucho.'", options: ["jugué", "jugaba"], correct: "jugaba" },
            { question: "Choose the correct tense: 'Ella ___ (cantar) cuando llegué.'", options: ["cantó", "cantaba"], correct: "cantaba" }
        ]
    },
    'b2-lesson10': {
        description: `
            <h3>Commands (Imperative Mood)</h3>
            <p>The imperative mood gives commands. For <em>tú</em> affirmative commands, use the third-person singular present indicative for regular verbs.</p>
            <ul>
                <li><em>hablar</em> → <em>habla</em> (speak)</li>
                <li><em>comer</em> → <em>come</em> (eat)</li>
                <li><em>vivir</em> → <em>vive</em> (live)</li>
            </ul>
            <p>Negative commands use the present subjunctive.</p>
        `,
        exercises: [
            { question: "Form the affirmative tú command for 'hablar'.", options: ["habla", "hables", "hablo", "hablamos"], correct: "habla" },
            { question: "Form the negative tú command for 'comer'.", options: ["come", "no comas", "no come", "comas"], correct: "no comas" },
            { question: "Form the affirmative tú command for 'vivir'.", options: ["vive", "vivas", "vivo", "vivimos"], correct: "vive" }
        ]
    },
    'b2-lesson11': {
        description: `
            <h3>Present Subjunctive Irregular Verbs</h3>
            <p>Irregular verbs in the present subjunctive often have stem changes or unique forms, e.g., <em>saber</em> → <em>sepa</em>, <em>ir</em> → <em>vaya</em>.</p>
            <p>Example: <em>tener</em> (to have)</p>
            <ul>
                <li>que yo tenga</li>
                <li>que tú tengas</li>
                <li>que él/ella tenga</li>
                <li>que nosotros tengamos</li>
                <li>que vosotros tengáis</li>
                <li>que ellos/ellas tengan</li>
            </ul>
        `,
        exercises: [
            { question: "Conjugate 'saber' in the present subjunctive for 'yo'.", options: ["sepa", "sepas", "sabe", "sepamos"], correct: "sepa" },
            { question: "Conjugate 'ir' in the present subjunctive for 'tú'.", options: ["vas", "vayas", "va", "vamos"], correct: "vayas" },
            { question: "Conjugate 'hacer' in the present subjunctive for 'ellos'.", options: ["hagan", "hagas", "haga", "hagamos"], correct: "hagan" }
        ]
    },
    'b2-lesson12': {
        description: `
            <h3>Reflexive Verbs in Subjunctive</h3>
            <p>Reflexive verbs in the present subjunctive follow the same conjugation rules, with reflexive pronouns (me, te, se, etc.).</p>
            <p>Example: <em>levantarse</em> (to get up)</p>
            <ul>
                <li>que yo me levante</li>
                <li>que tú te levantes</li>
                <li>que él/ella se levante</li>
                <li>que nosotros nos levantemos</li>
                <li>que vosotros os levantéis</li>
                <li>que ellos/ellas se levanten</li>
            </ul>
        `,
        exercises: [
            { question: "Conjugate 'ducharse' in the present subjunctive for 'yo'.", options: ["me duche", "te duches", "se duche", "nos duchemos"], correct: "me duche" },
            { question: "Conjugate 'acostarse' in the present subjunctive for 'tú'.", options: ["te acuestes", "me acueste", "se acueste", "nos acostemos"], correct: "te acuestes" },
            { question: "Complete: 'Espero que ellos ___ (despertarse) temprano.'", options: ["se despierten", "se despiertan", "te despiertes", "me despierte"], correct: "se despierten" }
        ]
    },
    'b2-lesson13': {
        description: `
            <h3>Se for Impersonal and Passive</h3>
            <p>The pronoun <em>se</em> is used for impersonal expressions (general subjects) or passive constructions.</p>
            <p>Examples:</p>
            <ul>
                <li>Impersonal: <em>Se habla español</em> (Spanish is spoken).</li>
                <li>Passive: <em>Se vendieron los libros</em> (The books were sold).</li>
            </ul>
        `,
        exercises: [
            { question: "Choose the correct form: '___ inglés en esta escuela.' (English is taught)", options: ["Se enseña", "Se enseñan", "Enseña", "Enseñan"], correct: "Se enseña" },
            { question: "Choose the correct form: '___ los platos después de comer.' (The dishes are washed)", options: ["Se lava", "Se lavan", "Lava", "Lavan"], correct: "Se lavan" },
            { question: "Complete: '___ que es peligroso.' (It is said)", options: ["Se dice", "Se dicen", "Dice", "Dicen"], correct: "Se dice" }
        ]
    },
    'b2-lesson14': {
        description: `
            <h3>Past Subjunctive Triggers</h3>
            <p>The imperfect subjunctive is often triggered by past-tense verbs expressing doubt, desire, or hypothetical situations, e.g., <em>quería que</em>, <em>si</em>.</p>
            <p>Example: <em>Quería que vinieras</em> (I wanted you to come).</p>
        `,
        exercises: [
            { question: "Complete: 'Esperaba que tú ___ (estudiar).'", options: ["estudiaras", "estudiabas", "estudias", "estudiara"], correct: "estudiaras" },
            { question: "Complete: 'Si ___ (tener) tiempo, viajaría.'", options: ["tuviera", "tenía", "tengo", "tuviese"], correct: "tuviera" },
            { question: "Complete: 'Dudaba que ellos ___ (llegar) a tiempo.'", options: ["llegaran", "llegaban", "llegasen", "llegaron"], correct: "llegaran" }
        ]
    },
    'b2-lesson15': {
        description: `
            <h3>Conditional Sentences with Si</h3>
            <p>Conditional sentences with <em>si</em> (if) use the imperfect subjunctive for hypothetical situations and the conditional for the result.</p>
            <p>Example: <em>Si tuviera dinero, viajaría</em> (If I had money, I would travel).</p>
        `,
        exercises: [
            { question: "Complete: 'Si ___ (saber) la verdad, te lo diría.'", options: ["supiera", "sabía", "sé", "supiese"], correct: "supiera" },
            { question: "Complete: 'Si estudiaras, ___ (aprobar).'", options: ["aprobarías", "aprobabas", "apruebas", "aprobarías"], correct: "aprobarías" },
            { question: "Complete: 'Si ___ (ser) rico, compraría una casa.'", options: ["fuera", "era", "es", "fuese"], correct: "fuera" }
        ]
    },
    'b2-lesson16': {
        description: `
            <h3>Gerunds and Infinitives</h3>
            <p>Gerunds (-ando, -iendo) describe ongoing actions, while infinitives are used after certain verbs like <em>querer</em> or prepositions.</p>
            <p>Examples:</p>
            <ul>
                <li><em>Estoy corriendo</em> (I’m running).</li>
                <li><em>Quiero aprender</em> (I want to learn).</li>
            </ul>
        `,
        exercises: [
            { question: "Choose the correct form: 'Me gusta ___ (cantar).'", options: ["cantar", "cantando", "canto", "cantas"], correct: "cantar" },
            { question: "Choose the correct form: 'Ellos están ___ (trabajar).'", options: ["trabajando", "trabajar", "trabajan", "trabajas"], correct: "trabajando" },
            { question: "Complete: 'Después de ___ (comer), descansaré.'", options: ["comer", "comiendo", "comí", "como"], correct: "comer" }
        ]
    },
    'b2-lesson17': {
        description: `
            <h3>Double Object Pronouns</h3>
            <p>When using direct and indirect object pronouns together, the indirect pronoun comes first (e.g., me lo, te la).</p>
            <p>Example: <em>Dámelo</em> (Give it to me).</p>
        `,
        exercises: [
            { question: "Complete: 'Ella ___ (dar, el libro, a mí).'", options: ["me lo da", "lo me da", "me la da", "la me da"], correct: "me lo da" },
            { question: "Complete: 'Nosotros ___ (enviar, la carta, a ellos).'", options: ["se la enviamos", "la se enviamos", "se lo enviamos", "lo se enviamos"], correct: "se la enviamos" },
            { question: "Complete: 'Tú ___ (comprar, el regalo, a ella).'", options: ["se lo compras", "lo se compras", "se la compras", "la se compras"], correct: "se lo compras" }
        ]
    },
    'b2-lesson18': {
        description: `
            <h3>Preterite Irregular Verbs</h3>
            <p>Some verbs have irregular stems in the preterite, e.g., <em>hacer</em> → <em>hice</em>, <em>venir</em> → <em>vine</em>.</p>
            <p>Example: <em>querer</em> (to want)</p>
            <ul>
                <li>yo quise</li>
                <li>tú quisiste</li>
                <li>él/ella quiso</li>
                <li>nosotros quisimos</li>
                <li>vosotros quisisteis</li>
                <li>ellos/ellas quisieron</li>
            </ul>
        `,
        exercises: [
            { question: "Conjugate 'hacer' in the preterite for 'yo'.", options: ["hice", "hiciste", "hizo", "hicimos"], correct: "hice" },
            { question: "Conjugate 'venir' in the preterite for 'tú'.", options: ["vine", "viniste", "vino", "vinimos"], correct: "viniste" },
            { question: "Conjugate 'saber' in the preterite for 'ellos'.", options: ["supe", "supiste", "supo", "supieron"], correct: "supieron" }
        ]
    },
    'b2-lesson19': {
        description: `
            <h3>Subjunctive with Conjunctions</h3>
            <p>Certain conjunctions like <em>a menos que</em>, <em>para que</em>, and <em>sin que</em> trigger the subjunctive when expressing purpose or condition.</p>
            <p>Example: <em>Estudiaré para que apruebe</em> (I’ll study so that I pass).</p>
        `,
        exercises: [
            { question: "Complete: 'No iré ___ (tú, venir) conmigo.'", options: ["a menos que vengas", "a menos que vienes", "para que vengas", "sin que vengas"], correct: "a menos que vengas" },
            { question: "Complete: 'Trabajo ___ (ellos, estar) contentos.'", options: ["para que estén", "para que están", "sin que estén", "a menos que estén"], correct: "para que estén" },
            { question: "Complete: 'Lo hice ___ (nadie, saberlo).'", options: ["sin que lo sepa", "sin que lo sabe", "para que lo sepa", "a menos que lo sepa"], correct: "sin que lo sepa" }
        ]
    },
    'b2-lesson20': {
        description: `
            <h3>Adverbial Clauses</h3>
            <p>Adverbial clauses with <em>cuando</em>, <em>mientras</em>, or <em>antes de que</em> may use the subjunctive for future or hypothetical actions.</p>
            <p>Example: <em>Llámame antes de que vengas</em> (Call me before you come).</p>
        `,
        exercises: [
            { question: "Complete: 'Te ayudaré ___ (tú, terminar).'", options: ["cuando termines", "cuando terminaste", "mientras termines", "antes de que termines"], correct: "cuando termines" },
            { question: "Complete: 'Estudiaré ___ (llegar, ellos).'", options: ["antes de que lleguen", "antes de que llegaron", "mientras lleguen", "cuando lleguen"], correct: "antes de que lleguen" },
            { question: "Complete: 'Hablábamos ___ (él, trabajar).'", options: ["mientras trabajaba", "mientras trabaje", "antes de que trabaje", "cuando trabaje"], correct: "mientras trabajaba" }
        ]
    },
    'b2-lesson21': {
        description: `
            <h3>Past Perfect Subjunctive</h3>
            <p>The past perfect subjunctive (pluscuamperfecto de subjuntivo) is used for hypothetical past situations, often with <em>si</em> or <em>ojalá</em>. It’s formed with the imperfect subjunctive of <em>haber</em> (hubiera, hubieras, etc.) + past participle.</p>
            <p>Example: <em>vivir</em> (to live)</p>
            <ul>
                <li>hubiera vivido</li>
                <li>hubieras vivido</li>
                <li>hubiera vivido</li>
                <li>hubiéramos vivido</li>
                <li>hubierais vivido</li>
                <li>hubieran vivido</li>
            </ul>
            <p>Example: <em>Si hubiera vivido aquí, habría sido feliz</em> (If I had lived here, I would have been happy).</p>
        `,
        exercises: [
            { question: "Conjugate 'hablar' in the past perfect subjunctive for 'yo'.", options: ["hubiera hablado", "hubieras hablado", "había hablado", "hubiéramos hablado"], correct: "hubiera hablado" },
            { question: "Complete: 'Ojalá ___ (comer) contigo.'", options: ["hubiera comido", "había comido", "hubieras comido", "comiera"], correct: "hubiera comido" },
            { question: "Complete: 'Si ___ (vivir) en España, habría aprendido español.'", options: ["hubiera vivido", "había vivido", "viviera", "hubieras vivido"], correct: "hubiera vivido" }
        ]
    },
    'b2-lesson22': {
        description: `
            <h3>Double Object Pronouns with Commands</h3>
            <p>When using double object pronouns (indirect + direct) with commands, attach them to affirmative commands and place them before negative commands.</p>
            <p>Examples:</p>
            <ul>
                <li>Affirmative: <em>Dame el libro</em> → <em>Dámelo</em> (Give it to me).</li>
                <li>Negative: <em>No me lo des</em> (Don’t give it to me).</li>
            </ul>
        `,
        exercises: [
            { question: "Form the affirmative tú command: 'Dame la carta.'", options: ["dámela", "me la da", "dame la", "no me la des"], correct: "dámela" },
            { question: "Form the negative tú command: 'No des el libro a Juan.'", options: ["no se lo des", "no lo des", "no le des", "dáselo"], correct: "no se lo des" },
            { question: "Form the affirmative tú command: 'Compra el regalo para mí.'", options: ["cómpramelo", "me lo compra", "cómpralo", "no me lo compres"], correct: "cómpramelo" }
        ]
    },
    'b2-lesson23': {
        description: `
            <h3>Subjunctive with Adverbial Clauses (Advanced)</h3>
            <p>Advanced adverbial clauses with <em>aunque</em> (although), <em>hasta que</em> (until), or <em>en caso de que</em> (in case) use the subjunctive for uncertainty or future actions.</p>
            <p>Example: <em>Te esperaré hasta que llegues</em> (I’ll wait until you arrive).</p>
        `,
        exercises: [
            { question: "Complete: 'Saldré ___ (tú, estar) listo.'", options: ["hasta que estés", "hasta que estás", "cuando estés", "mientras estés"], correct: "hasta que estés" },
            { question: "Complete: '___ (llover), me quedaré en casa.'", options: ["en caso de que llueva", "en caso de que llueve", "aunque llueva", "hasta que llueva"], correct: "en caso de que llueva" },
            { question: "Complete: '___ (ser) tarde, llegaré.'", options: ["aunque sea", "aunque es", "hasta que sea", "en caso de que sea"], correct: "aunque sea" }
        ]
    },
    'b2-lesson24': {
        description: `
            <h3>Future Perfect</h3>
            <p>The future perfect describes actions that will have been completed by a future point. It’s formed with <em>haber</em> in the future tense (habré, habrás, etc.) + past participle.</p>
            <p>Example: <em>hablar</em> (to speak)</p>
            <ul>
                <li>habré hablado</li>
                <li>habrás hablado</li>
                <li>habrá hablado</li>
                <li>habremos hablado</li>
                <li>habréis hablado</li>
                <li>habrán hablado</li>
            </ul>
            <p>Example: <em>Habré terminado para mañana</em> (I will have finished by tomorrow).</p>
        `,
        exercises: [
            { question: "Conjugate 'vivir' in the future perfect for 'yo'.", options: ["habré vivido", "habrás vivido", "habrá vivido", "habremos vivido"], correct: "habré vivido" },
            { question: "Conjugate 'comer' in the future perfect for 'tú'.", options: ["habré comido", "habrás comido", "habrá comido", "habremos comido"], correct: "habrás comido" },
            { question: "Complete: 'Ellos ___ (llegar) antes de las 5.'", options: ["habrán llegado", "habré llegado", "habrás llegado", "llegarán"], correct: "habrán llegado" }
        ]
    },
    'b2-lesson25': {
        description: `
            <h3>Conditional Perfect</h3>
            <p>The conditional perfect expresses what would have happened under certain conditions. It’s formed with <em>haber</em> in the conditional (habría, habrías, etc.) + past participle.</p>
            <p>Example: <em>aprender</em> (to learn)</p>
            <ul>
                <li>habría aprendido</li>
                <li>habrías aprendido</li>
                <li>habría aprendido</li>
                <li>habríamos aprendido</li>
                <li>habríais aprendido</li>
                <li>habrían aprendido</li>
            </ul>
            <p>Example: <em>Habría aprendido si hubiera estudiado</em> (I would have learned if I had studied).</p>
        `,
        exercises: [
            { question: "Conjugate 'hablar' in the conditional perfect for 'yo'.", options: ["habría hablado", "habrías hablado", "habré hablado", "habríamos hablado"], correct: "habría hablado" },
            { question: "Complete: 'Tú ___ (terminar) si hubieras empezado antes.'", options: ["habrías terminado", "habrás terminado", "terminarías", "habría terminado"], correct: "habrías terminado" },
            { question: "Complete: 'Ellos ___ (vivir) aquí si pudieran.'", options: ["habrían vivido", "habrán vivido", "vivirían", "habrías vivido"], correct: "habrían vivido" }
        ]
    }
};
    let currentCategory = 'nouns';
    let currentIndex = 0;
    let totalWords = 0;
    let words = [];
    let incorrectWords = [];
    let correctWords = [];
    let currentOptions = [];
    let selectedAnswer = null;
    let correctAnswerIndex = null;
    let reviewQueue = [];

    const wordDisplay = document.getElementById('wordDisplay');
    const optionsContainer = document.getElementById('optionsContainer');
    const nextButton = document.getElementById('nextButton');
    const feedback = document.getElementById('feedback');
    const counter = document.getElementById('counter');
    const progressFill = document.getElementById('progressFill');
    const categorySelector = document.getElementById('categorySelector');
    const correctIcon = document.getElementById('correctIcon');
    const incorrectIcon = document.getElementById('incorrectIcon');
    const correctCount = document.getElementById('correctCount');
    const incorrectCount = document.getElementById('incorrectCount');
    const reviewModal = document.getElementById('reviewModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalOptions = document.getElementById('modalOptions');
    const wordList = document.getElementById('wordList');
    const retryButton = document.getElementById('retryButton');
    const reviewButton = document.getElementById('reviewButton');
    const closeModal = document.getElementById('closeModal');

    // Lesson Modal Elements
    const lessonModal = document.getElementById('lessonModal');
    const lessonModalTitle = document.getElementById('lessonModalTitle');
    const lessonModalOptions = document.getElementById('lessonModalOptions');
    const exerciseButton = document.getElementById('exerciseButton');
    const lessonViewButton = document.getElementById('lessonViewButton');
    const closeLessonModal = document.getElementById('closeLessonModal');
    const grammarContent = document.getElementById('grammarContent');

    let currentLesson = null;
    let currentExerciseIndex = 0;
    let currentExercises = [];

    function initializeApp() {
        const categoryButtons = document.querySelectorAll('.category-button');
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                const category = button.dataset.category;
                selectCategory(category);
                categoryButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
            });
        });

        correctIcon.addEventListener('click', () => showReviewModal('correct'));
        incorrectIcon.addEventListener('click', () => showReviewModal('incorrect'));

        retryButton.addEventListener('click', handleRetry);
        reviewButton.addEventListener('click', handleReview);
        closeModal.addEventListener('click', () => {
            reviewModal.style.display = 'none';
            modalOptions.style.display = 'block';
            wordList.style.display = 'none';
        });

        selectCategory('nouns');
        nextButton.addEventListener('click', handleNextButtonClick);

        initializeSections();
    }

    function selectCategory(category, wordList = null) {
        currentCategory = category;
        words = wordList ? [...wordList] : [...vocabularyByCategory[category]];
        totalWords = words.length;
        currentIndex = 0;
        incorrectWords = [];
        correctWords = [];
        reviewQueue = [];
        updateScoreIcons();

        if (words.length === 0) {
            wordDisplay.textContent = "No words available in this category";
            optionsContainer.innerHTML = '';
            counter.textContent = "0/0";
            progressFill.style.width = "0%";
            return;
        }

        shuffleArray(words);
        showNextWord();
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function showNextWord() {
        optionsContainer.innerHTML = '';
        feedback.textContent = '';
        feedback.className = 'feedback';
        nextButton.style.display = 'none';
        selectedAnswer = null;

        if (words.length === 0) {
            wordDisplay.textContent = "No words available in this category";
            return;
        }

        let currentWord;
        if (reviewQueue.length > 0 && currentIndex % 5 === 0 && currentIndex > 0) {
            currentWord = reviewQueue.shift();
        } else {
            if (currentIndex >= words.length) {
                wordDisplay.textContent = "All words completed!";
                if (incorrectWords.length > 0) {
                    words = [...incorrectWords];
                    incorrectWords = [];
                    currentIndex = 0;
                    shuffleArray(words);
                    showNextWord();
                }
                return;
            }
            currentWord = words[currentIndex];
            currentIndex++;
        }

        wordDisplay.textContent = currentWord.spanish;
        generateOptions(currentWord);

        updateProgress();
    }

    function generateOptions(currentWord) {
        const optionsPool = vocabularyByCategory[currentCategory].filter(word => word.english !== currentWord.english);

        if (optionsPool.length < 4) {
            let allWords = [];
            for (const category in vocabularyByCategory) {
                allWords = allWords.concat(vocabularyByCategory[category]);
            }
            const additionalOptions = allWords.filter(word => 
                word.english !== currentWord.english && 
                !optionsPool.some(option => option.english === word.english)
            );
            shuffleArray(additionalOptions);
            optionsPool.push(...additionalOptions);
        }

        shuffleArray(optionsPool);
        const incorrectOptions = optionsPool.slice(0, 4);
        const allOptions = [...incorrectOptions, currentWord];
        shuffleArray(allOptions);
        currentOptions = allOptions;
        correctAnswerIndex = allOptions.findIndex(option => option.english === currentWord.english);

        allOptions.forEach((option, index) => {
            const button = document.createElement('button');
            button.className = 'option-button';
            button.textContent = option.english;
            button.dataset.index = index;
            button.addEventListener('click', () => handleOptionClick(index));
            optionsContainer.appendChild(button);
        });
    }

    function handleOptionClick(index) {
        if (selectedAnswer !== null) return;

        selectedAnswer = index;
        const isCorrect = index === correctAnswerIndex;
        const currentWord = currentOptions[correctAnswerIndex];

        const buttons = optionsContainer.querySelectorAll('.option-button');
        buttons[index].classList.add(isCorrect ? 'correct' : 'incorrect');

        if (!isCorrect) {
            buttons[correctAnswerIndex].classList.add('correct');
            if (!incorrectWords.some(word => word.english === currentWord.english)) {
                incorrectWords.push(currentWord);
            }
            reviewQueue.push(currentWord);
            feedback.textContent = "Incorrect";
            feedback.className = 'feedback incorrect';
        } else {
            if (!correctWords.some(word => word.english === currentWord.english)) {
                correctWords.push(currentWord);
            }
            feedback.textContent = "Correct!";
            feedback.className = 'feedback correct';
        }

        updateScoreIcons();
        nextButton.style.display = 'block';
    }

    function handleNextButtonClick() {
        showNextWord();
    }

    function updateProgress() {
        counter.textContent = `${currentIndex}/${totalWords}`;
        const progressPercent = (currentIndex / totalWords) * 100;
        progressFill.style.width = `${progressPercent}%`;
    }

    function updateScoreIcons() {
        correctCount.textContent = correctWords.length;
        incorrectCount.textContent = incorrectWords.length;
    }

    function showReviewModal(type) {
        const wordsToShow = type === 'correct' ? correctWords : incorrectWords;
        if (wordsToShow.length === 0) {
            alert(`No ${type} answers yet!`);
            return;
        }

        modalTitle.textContent = `${type.charAt(0).toUpperCase() + type.slice(1)} Answers`;
        reviewModal.style.display = 'flex';
        modalOptions.style.display = 'block';
        wordList.style.display = 'none';

        retryButton.dataset.type = type;
        reviewButton.dataset.type = type;
    }

    function handleRetry(event) {
        const type = event.target.dataset.type;
        const wordsToRetry = type === 'correct' ? correctWords : incorrectWords;

        if (wordsToRetry.length === 0) {
            reviewModal.style.display = 'none';
            return;
        }

        selectCategory(currentCategory, wordsToRetry);
        reviewModal.style.display = 'none';
    }

    function handleReview(event) {
        const type = event.target.dataset.type;
        const wordsToShow = type === 'correct' ? correctWords : incorrectWords;

        modalOptions.style.display = 'none';
        wordList.style.display = 'block';
        wordList.innerHTML = '';

        wordsToShow.forEach(word => {
            const wordItem = document.createElement('div');
            wordItem.className = 'word-item';
            wordItem.textContent = `${word.spanish} - ${word.english}`;
            wordList.appendChild(wordItem);
        });

        if (wordsToShow.length === 0) {
            wordList.textContent = 'No words to show.';
        }
    }

    // Initialize Sections and Lessons
    function initializeSections() {
        const sectionButtons = document.querySelectorAll('.section-button');
        sectionButtons.forEach(button => {
            button.addEventListener('click', () => {
                const section = button.dataset.section;
                const lessonsList = document.getElementById(`${section}-lessons`);
                
                const isVisible = lessonsList.style.display === 'block';
                document.querySelectorAll('.lessons-list').forEach(list => {
                    list.style.display = 'none';
                });
                document.querySelectorAll('.section-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                if (!isVisible) {
                    lessonsList.style.display = 'block';
                    button.classList.add('active');
                }
            });
        });

        const lessonButtons = document.querySelectorAll('.lesson-button');
        lessonButtons.forEach(button => {
            button.addEventListener('click', () => {
                const lesson = button.dataset.lesson;
                showLessonModal(lesson);
            });
        });

        exerciseButton.addEventListener('click', handleExercise);
        lessonViewButton.addEventListener('click', handleLessonView);
        closeLessonModal.addEventListener('click', () => {
            lessonModal.style.display = 'none';
            lessonModalOptions.style.display = 'block';
            grammarContent.style.display = 'none';
            grammarContent.innerHTML = '';
        });
    }

    function showLessonModal(lesson) {
        lessonModalTitle.textContent = `Lesson: ${document.querySelector(`[data-lesson="${lesson}"]`).textContent}`;
        lessonModal.style.display = 'flex';
        exerciseButton.dataset.lesson = lesson;
        lessonViewButton.dataset.lesson = lesson;
        lessonModalOptions.style.display = 'block';
        grammarContent.style.display = 'none';
    }

    function handleExercise(event) {
        const lesson = event.target.dataset.lesson;
        currentLesson = lesson;
        currentExercises = grammarLessons[lesson].exercises;
        currentExerciseIndex = 0;

        lessonModalOptions.style.display = 'none';
        grammarContent.style.display = 'block';
        showNextExercise();
    }

    function showNextExercise() {
        grammarContent.innerHTML = '';

        if (currentExerciseIndex >= currentExercises.length) {
            grammarContent.innerHTML = '<p>All exercises completed! Click "Close" to return.</p>';
            return;
        }

        const exercise = currentExercises[currentExerciseIndex];
        const questionDiv = document.createElement('div');
        questionDiv.innerHTML = `<p><strong>Question ${currentExerciseIndex + 1}:</strong> ${exercise.question}</p>`;
        grammarContent.appendChild(questionDiv);

        const optionsDiv = document.createElement('div');
        optionsDiv.style.display = 'flex';
        optionsDiv.style.flexDirection = 'column';
        optionsDiv.style.gap = '10px';
        optionsDiv.style.marginTop = '10px';

        exercise.options.forEach((option, index) => {
            const button = document.createElement('button');
            button.className = 'option-button';
            button.textContent = option;
            button.addEventListener('click', () => handleExerciseAnswer(option, exercise.correct));
            optionsDiv.appendChild(button);
        });

        grammarContent.appendChild(optionsDiv);
    }

    function handleExerciseAnswer(selected, correct) {
        const buttons = grammarContent.querySelectorAll('.option-button');
        buttons.forEach(button => {
            button.disabled = true;
            if (button.textContent === correct) {
                button.classList.add('correct');
            }
            if (button.textContent === selected && selected !== correct) {
                button.classList.add('incorrect');
            }
        });

        const feedbackDiv = document.createElement('div');
        feedbackDiv.className = 'feedback';
        feedbackDiv.textContent = selected === correct ? 'Correct!' : `Incorrect. The correct answer is "${correct}".`;
        feedbackDiv.className += selected === correct ? ' correct' : ' incorrect';
        grammarContent.appendChild(feedbackDiv);

        const nextButton = document.createElement('button');
        nextButton.className = 'next-button';
        nextButton.textContent = 'Next';
        nextButton.style.marginTop = '10px';
        nextButton.addEventListener('click', () => {
            currentExerciseIndex++;
            showNextExercise();
        });
        grammarContent.appendChild(nextButton);
    }

    function handleLessonView(event) {
        const lesson = event.target.dataset.lesson;
        const lessonData = grammarLessons[lesson];

        lessonModalTitle.textContent = `Lesson: ${document.querySelector(`[data-lesson="${lesson}"]`).textContent}`;
        lessonModalOptions.style.display = 'none';
        grammarContent.style.display = 'block';
        grammarContent.innerHTML = lessonData.description;
    }

    window.addEventListener('DOMContentLoaded', initializeApp);
    particlesJS('particles-js', {
    particles: {
        number: { value: 50, density: { enable: true, value_area: 800 } },
        color: { value: ['#ff5722', '#2196f3', '#4caf50'] }, // Spanish-inspired colors
        shape: { type: 'circle' },
        opacity: { value: 0.5, random: true },
        size: { value: 3, random: true },
        move: { enable: true, speed: 1, direction: 'none', random: true }
    },
    interactivity: {
        detect_on: 'canvas',
        events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' } },
        modes: { repulse: { distance: 100 }, push: { particles_nb: 4 } }
    }
});
</script>
</body>
</html>
